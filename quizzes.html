<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skill Assessment Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    /* Basic Styles */
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f4f4f9;
      margin: 0;
      padding: 0;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    #chatbot {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      height: 400px;
      overflow-y: auto;
      margin-bottom: 10px;
      background-color: #e8f5e9;
    }
    .message {
      margin: 10px 0;
      padding: 8px;
      border-radius: 5px;
      max-width: 80%;
      word-wrap: break-word;
    }
    .message.bot {
      background-color: #1abc9c;
      color: #fff;
      text-align: left;
    }
    .message.user {
      background-color: #f1f1f1;
      color: #333;
      text-align: right;
      margin-left: auto;
    }
    #input-area {
      display: flex;
    }
    #user-input {
      flex-grow: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px 0 0 5px;
      font-size: 16px;
    }
    #submit-btn, #retry-btn {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #1abc9c;
      border: none;
      border-radius: 0 5px 5px 0;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-left: 5px;
    }
    #submit-btn:hover, #retry-btn:hover {
      background-color: #2c3e50;
    }
    /* Hide the retry button until needed */
    #retry-btn {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Skill Assessment Quiz</h1>
    <div id="chatbot">
      <!-- Chat messages will appear here -->
    </div>
    <div id="input-area">
      <input type="text" id="user-input" placeholder="Type your answer here..." autofocus />
      <button id="submit-btn">Send</button>
      <button id="retry-btn">Retry</button>
    </div>
  </div>

  <script>
    // DOM elements
    const chatBot = document.getElementById('chatbot');
    const userInput = document.getElementById('user-input');
    const submitBtn = document.getElementById('submit-btn');
    const retryBtn = document.getElementById('retry-btn');

    // Pool of 50 quiz questions (Eswatini Music, Industry Business & Contract Related)
    const quizData = [
      {
        question: "Which city in Eswatini is renowned for its vibrant live music scene?",
        answer: "Mbabane",
        explanation: "Mbabane hosts numerous live music venues and events that showcase local talent."
      },
      {
        question: "Name the traditional event that celebrates Eswatini heritage through music.",
        answer: "Incwala",
        explanation: "Incwala is a sacred ceremony featuring traditional music and dance."
      },
      {
        question: "Which Eswatini artist is known for fusing traditional and modern sounds?",
        answer: "Siyaya",
        explanation: "Siyaya is celebrated for bridging indigenous musical styles with contemporary influences."
      },
      {
        question: "What traditional instrument is iconic in Eswatini music?",
        answer: "Mbira",
        explanation: "The mbira, or thumb piano, is central to many traditional Eswatini music performances."
      },
      {
        question: "Which genre is most associated with modern Eswatini pop music?",
        answer: "Afro-pop",
        explanation: "Afro-pop blends traditional African rhythms with contemporary pop influences."
      },
      {
        question: "What is a common clause in music contracts to protect an artist's creative work?",
        answer: "Copyright clause",
        explanation: "A copyright clause ensures that the artist retains rights over their original music."
      },
      {
        question: "Which term refers to the percentage of revenue an artist earns from record sales?",
        answer: "Royalty",
        explanation: "Royalties are the payments artists receive based on sales or usage of their music."
      },
      {
        question: "What is a key focus during music contract negotiations in Eswatini?",
        answer: "Royalty rates",
        explanation: "Negotiating favorable royalty rates is essential for ensuring fair compensation for artists."
      },
      {
        question: "Which document outlines the terms of an artist’s relationship with a record label?",
        answer: "Record agreement",
        explanation: "A record agreement details the rights, obligations, and compensation between an artist and a label."
      },
      {
        question: "What is often negotiated to provide artists with upfront payment?",
        answer: "Advance payment",
        explanation: "An advance is paid to artists before royalties are earned, providing immediate funds."
      },
      {
        question: "Which city is a hub for music industry professionals in Eswatini?",
        answer: "Mbabane",
        explanation: "Mbabane is a central location for industry activities, including negotiations and live performances."
      },
      {
        question: "Name a contract clause that ensures timely royalty payments.",
        answer: "Audit clause",
        explanation: "An audit clause allows artists to verify that royalties are calculated and paid accurately."
      },
      {
        question: "Which aspect of a music contract deals with distribution rights?",
        answer: "Licensing",
        explanation: "Licensing terms determine how and where an artist’s music can be distributed."
      },
      {
        question: "What fee is paid when music is used in TV, films, or commercials?",
        answer: "Sync fee",
        explanation: "A sync fee is paid to the artist for synchronizing music with visual media."
      },
      {
        question: "Which type of contract is typically used for individual music projects?",
        answer: "Single deal",
        explanation: "Single deals focus on individual tracks rather than full albums."
      },
      {
        question: "What is a benefit of a well-negotiated music contract for an artist?",
        answer: "Creative control",
        explanation: "Securing creative control allows artists to maintain their artistic vision."
      },
      {
        question: "Which event in Eswatini brings industry experts together for discussions on music business?",
        answer: "Music Business Summit",
        explanation: "The Music Business Summit offers insights into contract negotiations and industry trends."
      },
      {
        question: "What is the purpose of a non-compete clause in music contracts?",
        answer: "Prevent conflict of interest",
        explanation: "A non-compete clause restricts artists from signing with competing labels for a period of time."
      },
      {
        question: "Which revenue stream supplements record sales for many Eswatini artists?",
        answer: "Merchandising",
        explanation: "Merchandising involves selling branded products to fans, providing additional income."
      },
      {
        question: "What method is often used to resolve disputes in music contracts?",
        answer: "Arbitration",
        explanation: "Arbitration is an alternative dispute resolution method outside the courtroom."
      },
      {
        question: "Name a digital platform that has transformed music distribution in Eswatini.",
        answer: "SwaziTunes",
        explanation: "SwaziTunes supports digital distribution and streaming for local artists."
      },
      {
        question: "Which contract clause outlines the promotional efforts the label must provide?",
        answer: "Marketing clause",
        explanation: "A marketing clause details how the label will promote the artist’s work."
      },
      {
        question: "What does a '360 deal' typically involve?",
        answer: "Revenue sharing across multiple streams",
        explanation: "A 360 deal means the label shares revenue from various sources, not just record sales."
      },
      {
        question: "Which term specifies the duration of a music contract?",
        answer: "Term length",
        explanation: "The term length defines how long the artist is committed to the contract."
      },
      {
        question: "Name a key consideration for international music distribution rights.",
        answer: "Territorial rights",
        explanation: "Territorial rights determine the regions where the music can be legally distributed."
      },
      {
        question: "Which Eswatini city is emerging as a center for music industry innovation?",
        answer: "Manzini",
        explanation: "Manzini is gaining recognition for its innovative contributions to the music business."
      },
      {
        question: "What is a major benefit of signing with a reputable record label in Eswatini?",
        answer: "Industry connections",
        explanation: "Reputable labels provide valuable networking opportunities and resources."
      },
      {
        question: "Which contract term outlines an artist's touring obligations?",
        answer: "Touring clause",
        explanation: "A touring clause specifies the requirements and commitments related to live performances."
      },
      {
        question: "What is the primary purpose of a management contract in the music industry?",
        answer: "Career guidance",
        explanation: "Management contracts offer strategic advice and help shape an artist’s career path."
      },
      {
        question: "Which financial term ensures an artist receives payment even if sales are low?",
        answer: "Guarantee",
        explanation: "A guarantee secures a minimum payment regardless of commercial performance."
      },
      {
        question: "Name a provision in contracts that allows artists to regain rights over their work.",
        answer: "Rights reversion clause",
        explanation: "This clause lets artists reclaim rights to their music after a specified period."
      },
      {
        question: "Which type of contract is commonly used for collaborations between artists?",
        answer: "Joint venture",
        explanation: "Joint ventures outline shared responsibilities and revenue for collaborative projects."
      },
      {
        question: "What does 'sync licensing' enable an artist to do?",
        answer: "License music for media use",
        explanation: "Sync licensing permits the use of music in films, TV, and commercials."
      },
      {
        question: "Which term refers to the upfront payment provided to an artist?",
        answer: "Advance",
        explanation: "An advance is an upfront payment against future earnings from music sales."
      },
      {
        question: "What is a common challenge during contract negotiations in Eswatini?",
        answer: "Fair royalty distribution",
        explanation: "Ensuring a fair split of royalties is a frequent challenge for artists."
      },
      {
        question: "What role does an attorney play in the music contract process?",
        answer: "Legal advisor",
        explanation: "Attorneys provide legal guidance and help protect the artist's interests."
      },
      {
        question: "Which clause specifies the commercial use of an artist's image?",
        answer: "Image rights clause",
        explanation: "This clause governs how and where an artist's likeness can be used."
      },
      {
        question: "What is a key benefit of digital distribution for Eswatini artists?",
        answer: "Global reach",
        explanation: "Digital platforms allow artists to connect with audiences worldwide."
      },
      {
        question: "Name the revenue stream earned from live performances.",
        answer: "Booking fees",
        explanation: "Booking fees are payments received for live concerts and events."
      },
      {
        question: "Which contract clause gives an artist control over promotional materials?",
        answer: "Approval clause",
        explanation: "An approval clause ensures that promotional content is vetted by the artist."
      },
      {
        question: "What is a common challenge in music contract negotiations?",
        answer: "Lack of transparency",
        explanation: "Transparency is essential to ensure that contract terms are fair and clear."
      },
      {
        question: "Which term describes transferring certain rights from the artist to the label?",
        answer: "Assignment",
        explanation: "Assignment transfers specific rights, such as distribution, to the label."
      },
      {
        question: "What is a critical factor in negotiating a fair music contract?",
        answer: "Mutual trust",
        explanation: "A foundation of trust between the artist and label helps secure equitable terms."
      },
      {
        question: "Name a clause that allows an artist to exit a contract under set conditions.",
        answer: "Escape clause",
        explanation: "An escape clause outlines the conditions under which the contract can be terminated."
      },
      {
        question: "Which aspect of contract negotiations can greatly impact an artist's earnings?",
        answer: "Royalty rate",
        explanation: "A favorable royalty rate is key to long-term financial success for an artist."
      },
      {
        question: "What term defines how revenue is split among collaborators?",
        answer: "Profit sharing",
        explanation: "Profit sharing specifies the division of earnings among those involved in a project."
      },
      {
        question: "Name a provision that covers the use of an artist's music in advertising.",
        answer: "Endorsement clause",
        explanation: "An endorsement clause details the terms under which an artist’s music can be used in ads."
      },
      {
        question: "Which factor is important when deciding the term length of a contract?",
        answer: "Career stage",
        explanation: "An artist’s career stage can influence the optimal duration of a contract."
      },
      {
        question: "What is a benefit of renegotiating contract terms after a successful release?",
        answer: "Increased leverage",
        explanation: "Successful releases provide artists with more bargaining power for better terms."
      },
      {
        question: "Name a common mistake artists should avoid during contract negotiations.",
        answer: "Overlooking fine print",
        explanation: "Failing to review the details of a contract can lead to unfavorable conditions."
      }
    ];

    // Configuration for each round
    const QUESTIONS_PER_ROUND = 5;
    let selectedQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;

    // Function to get a random selection of questions from the pool
    function getRandomQuestions(arr, num) {
      const shuffled = arr.slice().sort(() => 0.5 - Math.random());
      return shuffled.slice(0, num);
    }

    // Function to add a message to the chat window
    function addMessage(text, sender = 'bot') {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message', sender);
      messageDiv.innerText = text;
      chatBot.appendChild(messageDiv);
      chatBot.scrollTop = chatBot.scrollHeight;
    }

    // Start the quiz round
    function startQuiz() {
      // Reset state
      chatBot.innerHTML = "";
      userInput.value = "";
      currentQuestionIndex = 0;
      score = 0;
      retryBtn.style.display = "none";
      // Select 5 random questions from the 50-question pool
      selectedQuestions = getRandomQuestions(quizData, QUESTIONS_PER_ROUND);
      addMessage("Hello! Welcome to the Eswatini Music & Industry Quiz. Let's begin with 5 questions.");
      setTimeout(askQuestion, 1000);
    }

    // Ask the current quiz question
    function askQuestion() {
      if (currentQuestionIndex < selectedQuestions.length) {
        addMessage(selectedQuestions[currentQuestionIndex].question);
      } else {
        finishQuiz();
      }
    }

    // Handle answer submission
    function handleAnswer() {
      const answer = userInput.value.trim();
      if (answer === "") return;
      addMessage(answer, 'user');
      userInput.value = "";
      
      const currentQuestion = selectedQuestions[currentQuestionIndex];
      if (answer.toLowerCase() === currentQuestion.answer.toLowerCase()) {
        score++;
        addMessage("Correct! " + currentQuestion.explanation);
      } else {
        addMessage("That's not correct. " + currentQuestion.explanation);
      }
      currentQuestionIndex++;
      setTimeout(askQuestion, 1500);
    }

    // Finish the quiz round and show score with a retry button
    function finishQuiz() {
      addMessage("Round complete! Your score: " + score + " out of " + QUESTIONS_PER_ROUND);
      retryBtn.style.display = "inline-block";
    }

    // Event listeners for sending answers and retrying
    submitBtn.addEventListener('click', handleAnswer);
    userInput.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') {
        handleAnswer();
      }
    });
    retryBtn.addEventListener('click', startQuiz);

    // Begin the first round when the page loads
    startQuiz();
  </script>
</body>
</html>
