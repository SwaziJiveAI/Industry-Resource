<html>
<head>
  <title>eSwatini Music Mogul</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
    .game-container { display: grid; grid-template-columns: 3fr 1fr; gap: 20px; }
    .main-panel { background: #252525; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px #252525; }
    .side-panel { display: flex; flex-direction: column; gap: 20px; }
    .info-box { background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .staff-card { 
      border: 1px solid #ccc; padding: 10px; margin-bottom: 5px; 
      border-radius: 5px; cursor: pointer; 
      transition: background 0.2s;
    }
    .staff-card:hover { background: #7B1FA2; }
    .decision-btn, .new-game-btn {
      margin: 5px; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer;
    }


    
    .demand-btn {
  margin-top: 5px;
  padding: 3px 8px;
  background-color: #ff9800;
  border: none;
  border-radius: 3px;
  color: white;
  cursor: pointer;
}

.current-demand {
  margin-top: 5px;
  padding: 5px;
  background-color: #fff3e0;
  border-radius: 3px;
}

.current-demand button {
  margin: 3px;
  padding: 2px 6px;
  border: none;
  border-radius: 3px;
  cursor: pointer;
}

.current-demand button:first-of-type {
  background-color: #4caf50;
  color: white;
}

.current-demand button:last-of-type {
  background-color: #f44336;
  color: white;
}

    .decision-btn {
      margin: 5px; padding: 10px 15px;
      background: #4CAF50; color: white;
      border: none; border-radius: 4px;
      cursor: pointer;
    }
    .new-game-btn {
      margin: 10px; padding: 10px 15px;
      background: #FF5733; color: white;
      border: none; border-radius: 4px;
      cursor: pointer;
    }
    /* The log container holds game messages */
    #log-container {
      height: 150px; overflow-y: auto;
      padding: 10px; background: #1a1a1a;
      color: #00ff00; margin-bottom: 10px;
      border: 2px solid #333;
    }
    /* The scenario container shows the current decision prompt */
    #scenario-container {
      margin-bottom: 20px;
    }
    .status-bar {
      display: flex; justify-content: space-between;
      margin-bottom: 20px; padding: 10px;
      background: #333; color: white;
      border-radius: 4px;
    }
    .scroll-box { height: 300px; overflow-y: auto; padding: 10px; border: 1px solid #ddd; }
    .artist-card, .staff-card {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 5px;
      border-radius: 5px;
    }
    .scenario-box { margin-bottom: 15px; }
    .marketplace-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 15px;
      margin-top: 20px;
      padding: 10px;
      background: #1E1E1E;
      border-radius: 8px;
    }
   
    .marketplace-section {
      background: rgb(0, 0, 0);
      padding: 10px;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .market-scroll {
      height: 150px;
      overflow-y: auto;
      padding: 5px;
      border: 1px solid #1E1E1E;
      border-radius: 4px;
    }
    .market-item {
      padding: 8px;
      margin: 5px 0;
      background: #252525;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .market-item:hover {
      background: #7B1FA2;
    }
    .reputation-level-basic { background: #FFE5E5 !important; }
    .reputation-level-rising { background: #FFEDCC !important; }
    .reputation-level-notable { background: #E5FFE5 !important; }
    .reputation-level-celebrated { background: #E5F0FF !important; }
    .reputation-level-legendary { background: #F2E5FF !important; }

    #negotiation-container {
      display: none;
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .negotiation-box {
      background: white; padding: 20px; border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2); width: 400px; text-align: center;
    }
    .negotiation-box h3 { margin-top: 0; }
    .negotiation-box p { margin: 10px 0; }
    .negotiation-btn {
      margin: 5px; padding: 10px 15px;
      background: #4CAF50; color: white;
      border: none; border-radius: 4px;
      cursor: pointer;
    }
    .negotiation-btn:hover { background: #7B1FA2; }

    #news-container {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-top: 20px;
      height: 200px;
      overflow-y: auto;
    }
    .news-item {
      margin-bottom: 10px;
      padding: 5px;
      border-bottom: 1px solid #ddd;
    }

    .negotiation-btn:hover { 
    background: #7B1FA2; 
}

#staff-advice-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .staff-advice-box {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      width: 400px;
      text-align: center;
    }
  /* Modern Color Scheme - Can be applied safely */
  :root {
        --primary-color: #6200ea;
        --secondary-color: #03dac6;
        --background-color: #121212;
        --surface-color: #1e1e1e;
        --text-primary: rgba(255, 255, 255, 0.87);
        --text-secondary: rgba(255, 255, 255, 0.6);
    }

    body {
        background-color: var(--background-color);
        color: var(--text-primary);
        font-family: 'Montserrat', 'Segoe UI', sans-serif;
        transition: all 0.3s ease;
    }

    /* Enhanced Title - Won't break existing layout */
    h1 {
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-transform: uppercase;
        letter-spacing: 3px;
        font-weight: 800;
        text-shadow: 0 0 15px rgba(98, 0, 234, 0.5);
    }

    /* Improved Container - Compatible with existing structure */
    .panel {
        background-color: var(--surface-color);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 
                    0 0 20px rgba(98, 0, 234, 0.3);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .panel::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        z-index: 1;
    }

    /* Enhanced Input Styling - Works with existing inputs */
    input {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
        transition: all 0.3s ease;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 10px 15px;
    }

    input:focus {
        outline: none;
        box-shadow: 0 0 0 2px var(--secondary-color), 
                    inset 0 0 10px rgba(0, 0, 0, 0.3);
        background-color: rgba(255, 255, 255, 0.15);
    }

    /* Button Styling - Compatible with existing buttons */
    button {
        background: linear-gradient(45deg, var(--primary-color), #9d4edd);
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(98, 0, 234, 0.4);
        transition: all 0.3s ease;
    }

    button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(98, 0, 234, 0.6);
    }

    button:active {
        transform: translateY(1px);
    }

    /* Score Display Enhancement - Works with existing score display */
    #score {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--secondary-color);
        animation: scoreFlash 0.5s ease;
    }

    @keyframes scoreFlash {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    /* Artist Information Enhancement */
    .artist-info {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 15px;
        margin: 15px 0;
        transition: all 0.3s ease;
    }

    .artist-info:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        background: rgba(255, 255, 255, 0.08);
    }

    /* Timer Display Enhancement */
    #timer {
        font-size: 1.8rem;
        text-align: center;
        margin: 15px 0;
        color: var(--text-primary);
        text-shadow: 0 0 10px rgba(3, 218, 198, 0.5);
    }

    /* Notification Toast - New element that won't interfere */
    .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: var(--surface-color);
        color: var(--text-primary);
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        transform: translateX(150%);
        transition: transform 0.3s ease;
        z-index: 1000;
        display: none;
    }

    .toast.show {
        transform: translateX(0);
        display: flex;
    }

    /* Bonus Points Animation - Won't interfere with existing elements */
    .bonus-points {
        position: absolute;
        color: #00c853;
        font-weight: bold;
        font-size: 1.2rem;
        animation: floatUp 2s forwards;
        pointer-events: none;
        z-index: 1001;
    }

    @keyframes floatUp {
        0% { opacity: 0; transform: translateY(0); }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { opacity: 0; transform: translateY(-100px); }
    }

/* Color scheme variables */
:root {
  --primary-color: #4CAF50;       /* Green for positive actions/money */
  --secondary-color: #7B1FA2;     /* Purple as accent color */
  --background-dark: #3a3a3a;     /* Dark background */
  --surface-color: #1E1E1E;       /* Slightly lighter surface */
  --container-bg: #252525;        /* Container background */
  --success-text: #4CAF50;        /* Green text for positive numbers */
  --warning-text: #FF9800;        /* Orange for warnings */
  --text-primary: rgba(255, 255, 255, 0.87);  /* Main text */
  --text-secondary: #ffffff99; /* Less important text */
  --border-color: #ffffff1f;  /* Subtle borders */
}

/* Apply dark theme to body and main containers */
body {
  background-color: var(--background-dark);
  color: var(--text-primary);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Main UI containers - panels that hold information */
.panel, .container, [class*="box"], [class*="card"] {
  background-color: var(--container-bg);
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
  border: 1px solid var(--border-color);
  transition: box-shadow 0.3s ease, transform 0.2s ease;
  overflow: hidden;
}

/* Container hover effect */
.panel:hover, .container:hover, [class*="box"]:hover, [class*="card"]:hover {
  box-shadow: 0 7px 14px rgba(0, 0, 0, 0.2), 0 3px 6px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

/* Money and positive value styling */
[class*="cash"], [class*="money"], .gained, [class*="revenue"] {
  color: var(--success-text);
  font-weight: bold;
}

/* Header Bar - the top status bar */
[class*="header"], [class*="status-bar"], [class*="top-bar"] {
  background-color: #7B1FA2;
  color: var(--text-primary);
  padding: 8px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Style for buttons */
button, .button, [class*="btn"] {
  background: linear-gradient(45deg, var(--primary-color), #7B1FA2);
  color: white;
  border: none;
  border-radius: 4px;
  padding: 8px 16px;
  cursor: pointer;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: all 0.2s ease;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

button:hover, .button:hover, [class*="btn"]:hover {
  background: linear-gradient(45deg, #43A047, #66BB6A);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  transform: translateY(-2px);
}

/* Artist/talent signing messages */
[class*="signed"], [class*="artist"] {
  color: #64DD17;
}

/* Content areas with scrollable content */
[class*="content-area"], [class*="scroll"] {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  padding: 8px;
  max-height: 300px;
  overflow-y: auto;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--surface-color);
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Decision buttons - like the ones in the screenshot */
.decision-btn, #adjust-marketing, #cut-costs, #delay-projects {
  background-color: var(--primary-color);
  color: white;
  padding: 10px 16px;
  margin: 8px 4px;
  border-radius: 4px;
  font-weight: bold;
  text-align: center;
  text-transform: uppercase;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition: all 0.2s ease;
}

.decision-btn:hover, #adjust-marketing:hover, #cut-costs:hover, #delay-projects:hover {
  background-color: #43A047;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  transform: translateY(-2px);
}

/* Reputation indicator */
[class*="reputation"] {
  color: #9C27B0;
  font-weight: bold;
}

/* Day counter */
[class*="day"] {
  background-color: #424242;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-weight: bold;
}

/* Card headers or section titles */
[class*="card-header"], [class*="section-title"], h3, h4 {
  color: var(--text-primary);
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 8px;
  margin-bottom: 12px;
  font-weight: 600;
}

/* Artist/staff information rows */
.info-row, [class*="list-item"] {
  display: flex;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-color);
}

/* Icons within the game */
[class*="icon"] {
  margin-right: 8px;
  opacity: 0.87;
}

/* Action summary text */
[class*="summary"] {
  color: var(--text-secondary);
  font-style: italic;
  margin: 6px 0;
}

/* Artist mood indicators */
[class*="pleased"], [class*="happy"] {
  color: #4CAF50;
}

[class*="neutral"] {
  color: #FFC107;
}

[class*="unhappy"], [class*="angry"] {
  color: #F44336;
}

/* Specific element for staff salaries */
[class*="salaries"] {
  color: #E57373; /* Lighter red for expenses */
}

/* Enhance check demands button */
[class*="check-demands"] {
  background: linear-gradient(45deg, #9C27B0, #673AB7);
  color: white;
}

[class*="renegotiate"] {
  background: linear-gradient(45deg, #2196F3, #03A9F4);
  color: white;
}

</style>
</head>
<body>
  <div class="status-bar">
    <div>💰 Cash: <span id="cash">E150,000</span></div>
    <div>📅 Day: <span id="day">1</span>/50</div>
    <div>🌟 Reputation: <span id="reputation-points">0</span> (<span id="reputation-level">Basic</span>)</div>
  </div>

  <div class="game-container">
    <div class="main-panel">
      <div id="log-container">
        <div class="scenario-box">
          ▶️ Welcome! You are now officially the Swazi Jive Records President<br>
          ▶️ Sakhile expects you to get the record label back to the top!<br>
          ▶️ You have 50 days above to make your impression in the industry!<br>
          ▶️ Start building your music empire, increase your reputation to unlock more content!
        </div>
      </div>
      <div id="scenario-container"></div>
  
      <div class="marketplace-container">
        
        <div class="marketplace-section">
          <h3>🎭 Shows</h3>
          <div id="shows-market" class="market-scroll"></div>
        </div>
        <div class="marketplace-section">
          <h3>📝 Deals</h3>
          <div id="deals-market" class="market-scroll"></div>
        </div>
        <div class="marketplace-section">
          <h3>🎤 Artists Market</h3>
          <div id="artists-market" class="market-scroll"></div>
        </div>
        <div class="marketplace-section">
          <h3>🎛️ Equipment</h3>
          <div id="equipment-market" class="market-scroll"></div>
        </div>
        <div class="marketplace-section">
          <h3>📚 Training</h3>
          <div id="training-market" class="market-scroll"></div>
        </div>
        <div class="marketplace-section">
          <h3>📣 Marketing</h3>
          <div id="marketing-market" class="market-scroll"></div>
        </div>
      </div>
       <div class="info-box">
        <h3>📰 News Updates</h3>
        <div id="news-updates" class="scroll-box"></div>  
      </div>
      <div class="marketplace-section">
        <h3>👥 Job Applications</h3>
        <div id="job-applications-market" class="market-scroll"></div>
      </div>
    </div>
   
    <div class="side-panel">
      <div class="info-box">
        <h3>🎤 Artists</h3>
        <div id="artist-roster" class="scroll-box"></div>
      </div>
      <div class="info-box">
        <h3>📦 Inventory</h3>
        <div id="inventory-list" class="scroll-box"></div>
      </div>
       <div class="info-box">
        <h3>👥 Staff</h3>
        <div id="staff-list" class="scroll-box"></div>
      </div>
      <div class="info-box">
        <h3>🏆 Highscores</h3>
        <a href="/Industry-Resource/leaderboard.html" class="negotiation-btn" >Top 10 Moguls </a>
      </div>
    </div>

  </div>


  <div id="negotiation-container">
    <div class="negotiation-box">
      <h3>Negotiate with <span id="negotiation-artist-name"></span></h3>
      <p>Artist's Mood: <span id="artist-mood"></span></p>
      <p>Artist's Demand: E<span id="artist-demand"></span></p>
      <p>Your Offer: E<span id="your-offer"></span></p>
      <button class="negotiation-btn" onclick="acceptDemand()">Confirm</button>
      <button class="negotiation-btn" onclick="offerLess()">Offer Less</button>
      <button class="negotiation-btn" onclick="offerMore()">Offer More</button>
      <button class="negotiation-btn" onclick="declineOffer()">Decline</button>
      <button class="negotiation-btn" onclick="bluff()">Bluff</button>
      <button class="negotiation-btn" onclick="closeNegotiation()">Close</button>
    </div>
  </div>
</div>

<div id="staff-advice-container">
  <div class="staff-advice-box">
    <h3>Staff Advice from <span id="staff-member-name"></span></h3>
    <p id="staff-advice-content"></p>
    <button class="decision-btn" onclick="closeStaffAdvice()">Close</button>
  </div>
  <!-- Add this at the end of your body, before the closing body tag -->
<div class="toast" id="notification-toast">
  <div id="toast-message">Correct! +100 points</div>
</div>

</div>

<script>
    let gameState;
    let marketData;
    let currentNegotiationArtist = null;
    let currentOffer = 0;

    // List of 52 unique scenarios
    const allScenarios = [
    {
    question: "A social media influencer promotes your artist:",
    options: [
      { text: "Pay for the promotion (Cost E35k)", effect: () => { adjustArtistHappiness(10); adjustStaffMorale(5); adjustArtistPopularity(50); adjustReputation(20); return -35000; } },
      { text: "Stay independent (Gain E30k)", effect: () => { adjustArtistHappiness(10); adjustStaffMorale(10); adjustArtistPopularity(5); adjustReputation(10); return 30000; } },
      { text: "Do Nothing (Risk E20k)", effect: () => { adjustArtistHappiness(-20); adjustStaffMorale(-15); adjustArtistPopularity(-10); adjustReputation(-15); return -20000; } }
    ]
  },
  {
    question: "A rival label tries to poach your top artist:",
    options: [
      { text: "Counteroffer (Cost E100k)", effect: () => { adjustArtistHappiness(20); adjustStaffMorale(5); adjustArtistPopularity(20); adjustReputation(25); return -100000; } },
      { text: "Let them go (Gain E60k)", effect: () => { adjustArtistHappiness(-20); adjustStaffMorale(10); adjustArtistPopularity(-10); adjustReputation(-20); return 60000; } },
      { text: "Do Nothing (Risk Artist Leaving)", effect: () => { adjustArtistHappiness(-30); adjustStaffMorale(-20); adjustArtistPopularity(-30); adjustReputation(-30); return -30000; } }
    ]
  },
  {
    question: "Your artist receives an unexpected invitation to perform at an exclusive event.",
    options: [
      { text: "Accept the invitation (Cost E40k)", effect: () => { adjustArtistPopularity(40); adjustReputation(25); return -40000; } },
      { text: "Decline politely", effect: () => { adjustReputation(-15); return -10000; } },
      { text: "Negotiate a higher fee", effect: () => { adjustArtistPopularity(20); adjustReputation(15); return 20000; } }
    ]
  },
  {
    question: "A renowned producer offers to collaborate with your artist.",
    options: [
      { text: "Accept the collaboration (Cost E70k)", effect: () => { adjustArtistPopularity(50); adjustReputation(30); return -70000; } },
      { text: "Negotiate better terms", effect: () => { adjustArtistPopularity(25); adjustReputation(20); return 30000; } },
      { text: "Decline the offer", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "A scandal involving one of your artists surfaces in the media.",
    options: [
      { text: "Issue a public apology", effect: () => { adjustArtistHappiness(-20); adjustReputation(-15); return -20000; } },
      { text: "Ignore it", effect: () => { adjustReputation(-30); return -25000; } },
      { text: "Spin it positively", effect: () => { adjustArtistHappiness(10); adjustReputation(20); return 25000; } }
    ]
  },
  {
    question: "Your artist's latest single goes viral overnight.",
    options: [
      { text: "Invest in promotion (Cost E50k)", effect: () => { adjustArtistPopularity(60); adjustReputation(40); return 50000; } },
      { text: "Remain cautious", effect: () => { adjustArtistPopularity(25); adjustReputation(15); return 20000; } },
      { text: "Release a follow-up track immediately", effect: () => { adjustArtistPopularity(15); adjustReputation(10); return -30000; } }
    ]
  },
  {
    question: "A famous celebrity expresses interest in endorsing your artist.",
    options: [
      { text: "Accept the endorsement (Cost E50k)", effect: () => { adjustReputation(40); adjustArtistPopularity(50); return 60000; } },
      { text: "Negotiate for a better deal", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Refuse the offer", effect: () => { adjustReputation(-20); return -20000; } }
    ]
  },
  {
    question: "A major sponsor offers to fund a world tour for your artist.",
    options: [
      { text: "Accept the sponsorship (Cost E80k)", effect: () => { adjustReputation(50); adjustArtistPopularity(60); return 80000; } },
      { text: "Negotiate for better terms", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Decline the offer", effect: () => { adjustReputation(-25); return -30000; } }
    ]
  },
  {
    question: "A rival label is rumored to be making a tempting offer to one of your artists.",
    options: [
      { text: "Increase their contract offer (Cost E60k)", effect: () => { adjustArtistHappiness(25); adjustReputation(20); return -60000; } },
      { text: "Offer additional benefits", effect: () => { adjustArtistHappiness(30); adjustReputation(15); return -40000; } },
      { text: "Let them go (Gain E30k)", effect: () => { adjustReputation(-25); return 30000; } }
    ]
  },
  {
    question: "Your studio equipment gets upgraded unexpectedly by a benefactor.",
    options: [
      { text: "Upgrade your marketing strategy", effect: () => { adjustReputation(25); adjustArtistHappiness(15); return 40000; } },
      { text: "Invest extra in training", effect: () => { adjustArtistPopularity(20); return -20000; } },
      { text: "Keep your current plans", effect: () => { adjustReputation(-10); return -10000; } }
    ]
  },
  {
    question: "An influential music blogger writes a rave review about your artist.",
    options: [
      { text: "Capitalize on the publicity", effect: () => { adjustReputation(30); adjustArtistPopularity(40); return 50000; } },
      { text: "Downplay it", effect: () => { adjustReputation(10); return 15000; } },
      { text: "Ignore the review", effect: () => { adjustReputation(-15); return -10000; } }
    ]
  },
  {
    question: "A financial analyst predicts a downturn in the music industry.",
    options: [
      { text: "Cut costs immediately", effect: () => { adjustReputation(-20); return 40000; } },
      { text: "Invest cautiously", effect: () => { adjustReputation(10); return -10000; } },
      { text: "Double down on promotion", effect: () => { adjustReputation(25); adjustArtistPopularity(30); return -50000; } }
    ]
  },
  {
    question: "Your artist gets a chance to perform on national TV.",
    options: [
      { text: "Invest in the appearance (Cost E60k)", effect: () => { adjustArtistPopularity(50); adjustReputation(40); return 60000; } },
      { text: "Skip the opportunity", effect: () => { adjustReputation(-25); return -20000; } },
      { text: "Prepare extensively then perform", effect: () => { adjustArtistPopularity(30); adjustReputation(20); return -35000; } }
    ]
  },
  {
    question: "A new streaming service offers a lucrative deal for your artist's music.",
    options: [
      { text: "Sign the deal", effect: () => { adjustReputation(30); return 50000; } },
      { text: "Negotiate terms", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Wait for better offers", effect: () => { adjustReputation(-15); return -10000; } }
    ]
  },
  {
    question: "A local charity event requests your artist to perform for free.",
    options: [
      { text: "Donate the performance", effect: () => { adjustReputation(25); return 20000; } },
      { text: "Charge a reduced fee", effect: () => { adjustReputation(15); return 15000; } },
      { text: "Decline the request", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "Your artist's social media following is growing rapidly.",
    options: [
      { text: "Launch a targeted campaign (Cost E25k)", effect: () => { adjustArtistPopularity(40); return 40000; } },
      { text: "Invest in merchandise", effect: () => { adjustReputation(15); return -15000; } },
      { text: "Do nothing", effect: () => { adjustReputation(-10); return -10000; } }
    ]
  },
  {
    question: "A major music festival is seeking new acts.",
    options: [
      { text: "Enter the festival (Cost E50k)", effect: () => { adjustArtistPopularity(50); adjustReputation(30); return 60000; } },
      { text: "Skip it", effect: () => { adjustReputation(-20); return -15000; } },
      { text: "Prepare a special performance", effect: () => { adjustArtistPopularity(25); return -25000; } }
    ]
  },
  {
    question: "Your artist is invited to an international music conference.",
    options: [
      { text: "Attend and network (Cost E40k)", effect: () => { adjustReputation(40); return 50000; } },
      { text: "Send a representative", effect: () => { adjustReputation(20); return -20000; } },
      { text: "Decline the invitation", effect: () => { adjustReputation(-25); return -15000; } }
    ]
  },
  {
    question: "A new trend in music production emerges.",
    options: [
      { text: "Invest in new technology (Cost E60k)", effect: () => { adjustReputation(30); return -60000; } },
      { text: "Ignore the trend", effect: () => { adjustReputation(-20); return -20000; } },
      { text: "Try a small pilot project", effect: () => { adjustArtistPopularity(20); return -30000; } }
    ]
  },
  {
    question: "Your artist faces harsh criticism from a respected critic.",
    options: [
      { text: "Address the criticism publicly", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Ignore the criticism", effect: () => { adjustReputation(-30); return -25000; } },
      { text: "Offer a counter-review", effect: () => { adjustReputation(25); return 30000; } }
    ]
  },
  {
    question: "A successful remix of your artist's song is released by an independent DJ.",
    options: [
      { text: "Promote the remix", effect: () => { adjustArtistPopularity(30); return 40000; } },
      { text: "Create an official remix", effect: () => { adjustReputation(20); return -30000; } },
      { text: "Downplay it", effect: () => { adjustReputation(-15); return -10000; } }
    ]
  },
  {
    question: "Your artist wins a local music award.",
    options: [
      { text: "Celebrate with a promotion event (Cost E40k)", effect: () => { adjustReputation(40); return 50000; } },
      { text: "Reinvest in training", effect: () => { adjustArtistPopularity(20); return -20000; } },
      { text: "Ignore the award", effect: () => { adjustReputation(-15); return -15000; } }
    ]
  },
  {
    question: "A viral challenge featuring your artist's music takes off online.",
    options: [
      { text: "Launch a related marketing campaign (Cost E35k)", effect: () => { adjustReputation(30); return 45000; } },
      { text: "Partner with influencers", effect: () => { adjustReputation(20); return -25000; } },
      { text: "Stay neutral", effect: () => { adjustReputation(-10); return -15000; } }
    ]
  },
  {
    question: "A sudden drop in streaming numbers concerns your team.",
    options: [
      { text: "Investigate and adjust strategy", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Blame external factors", effect: () => { adjustReputation(-25); return -30000; } },
      { text: "Ignore the drop", effect: () => { adjustReputation(-20); return -25000; } }
    ]
  },
  {
    question: "Your artist is approached for a brand partnership.",
    options: [
      { text: "Secure the partnership (Cost E40k)", effect: () => { adjustReputation(40); return 60000; } },
      { text: "Negotiate terms", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Decline the offer", effect: () => { adjustReputation(-20); return -20000; } }
    ]
  },
  {
    question: "A technical glitch disrupts your live performance.",
    options: [
      { text: "Apologize and reschedule", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Offer refunds", effect: () => { adjustReputation(-20); return -30000; } },
      { text: "Blame technical issues", effect: () => { adjustReputation(-30); return -25000; } }
    ]
  },
  {
    question: "A competitor releases a hit single that overshadows your artist.",
    options: [
      { text: "Release a new track immediately (Cost E40k)", effect: () => { adjustArtistPopularity(40); return -40000; } },
      { text: "Rebrand your artist", effect: () => { adjustReputation(20); return -30000; } },
      { text: "Collaborate with another talent", effect: () => { adjustReputation(30); return -35000; } }
    ]
  },
  {
    question: "Your artist's merchandise sales skyrocket unexpectedly.",
    options: [
      { text: "Expand the merchandise line (Cost E25k)", effect: () => { adjustReputation(25); return 50000; } },
      { text: "Reinvest profits", effect: () => { adjustReputation(15); return 20000; } },
      { text: "Keep the status quo", effect: () => { adjustReputation(-10); return -10000; } }
    ]
  },
  {
    question: "A new music award show invites your artist to perform.",
    options: [
      { text: "Accept the invitation (Cost E30k)", effect: () => { adjustReputation(30); return 40000; } },
      { text: "Negotiate a performance fee", effect: () => { adjustReputation(20); return 25000; } },
      { text: "Decline the invitation", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "A famous DJ requests a remix of your artist's song.",
    options: [
      { text: "Approve the remix", effect: () => { adjustArtistPopularity(30); return 40000; } },
      { text: "Negotiate a fee", effect: () => { adjustReputation(15); return -15000; } },
      { text: "Decline the request", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "A new trend in retro music emerges and your artist fits the style.",
    options: [
      { text: "Shift your artist's style (Cost E35k)", effect: () => { adjustArtistPopularity(40); return 45000; } },
      { text: "Launch a retro-themed event", effect: () => { adjustReputation(20); return -20000; } },
      { text: "Ignore the trend", effect: () => { adjustReputation(-15); return -15000; } }
    ]
  },
  {
    question: "Your artist's manager suggests a risky publicity stunt.",
    options: [
      { text: "Go ahead with the stunt (Cost E40k)", effect: () => { adjustReputation(30); return 50000; } },
      { text: "Modify the stunt", effect: () => { adjustReputation(20); return -25000; } },
      { text: "Reject the idea", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "A social media crisis emerges around one of your songs.",
    options: [
      { text: "Issue a statement", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Remove the song", effect: () => { adjustReputation(-20); return -25000; } },
      { text: "Ignore the crisis", effect: () => { adjustReputation(-30); return -30000; } }
    ]
  },
  {
    question: "A breakthrough in audio technology is announced.",
    options: [
      { text: "Invest in the new technology (Cost E50k)", effect: () => { adjustReputation(30); return -50000; } },
      { text: "Wait and see", effect: () => { adjustReputation(-10); return -10000; } },
      { text: "Stick with traditional methods", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "A major brand wants to sponsor a new music video for your artist.",
    options: [
      { text: "Accept the sponsorship (Cost E50k)", effect: () => { adjustReputation(40); return 60000; } },
      { text: "Negotiate for better terms", effect: () => { adjustReputation(25); return 30000; } },
      { text: "Decline the offer", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "Your artist gets featured in a popular magazine.",
    options: [
      { text: "Leverage the feature for more publicity", effect: () => { adjustReputation(30); return 40000; } },
      { text: "Host a meet-and-greet event", effect: () => { adjustReputation(20); return -20000; } },
      { text: "Ignore the feature", effect: () => { adjustReputation(-15); return -15000; } }
    ]
  },
  {
    question: "A famous producer offers a workshop for your team.",
    options: [
      { text: "Attend the workshop (Cost E25k)", effect: () => { adjustReputation(25); return -25000; } },
      { text: "Send key staff members", effect: () => { adjustReputation(15); return -15000; } },
      { text: "Skip the workshop", effect: () => { adjustReputation(-20); return -10000; } }
    ]
  },
  {
    question: "Your artist's tour faces unexpected delays.",
    options: [
      { text: "Offer compensation to fans", effect: () => { adjustReputation(-15); return -20000; } },
      { text: "Reschedule promptly", effect: () => { adjustReputation(25); return -25000; } },
      { text: "Provide regular updates", effect: () => { adjustReputation(15); return -15000; } }
    ]
  },
  {
    question: "An international crisis impacts the music industry.",
    options: [
      { text: "Adjust your marketing strategy", effect: () => { adjustReputation(20); return -30000; } },
      { text: "Cut costs", effect: () => { adjustReputation(-15); return 30000; } },
      { text: "Delay major projects", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "A renowned music critic offers a mixed review of your artist.",
    options: [
      { text: "Respond constructively", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Ignore the review", effect: () => { adjustReputation(-20); return -15000; } },
      { text: "Launch a counter campaign", effect: () => { adjustReputation(25); return 30000; } }
    ]
  },
  {
    question: "Your artist's collaboration with a famous musician goes viral.",
    options: [
      { text: "Promote the collaboration (Cost E35k)", effect: () => { adjustArtistPopularity(40); return 50000; } },
      { text: "Negotiate a follow-up project", effect: () => { adjustReputation(20); return -30000; } },
      { text: "Let it fade", effect: () => { adjustReputation(-15); return -15000; } }
    ]
  },
  {
    question: "A surprise donation boosts your cash reserves.",
    options: [
      { text: "Invest in growth", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Save for a rainy day", effect: () => { adjustReputation(10); return 20000; } },
      { text: "Donate to charity", effect: () => { adjustReputation(-15); return -20000; } }
    ]
  },
  {
    question: "Your team discovers a hidden talent in the local scene.",
    options: [
      { text: "Sign the new talent immediately (Cost E35k)", effect: () => { adjustReputation(30); return -35000; } },
      { text: "Develop them slowly", effect: () => { adjustReputation(15); return -15000; } },
      { text: "Pass on the opportunity", effect: () => { adjustReputation(-20); return -10000; } }
    ]
  },
  {
    question: "A surge in ticket prices boosts revenue but risks alienating fans.",
    options: [
      { text: "Reevaluate your pricing strategy", effect: () => { adjustReputation(15); return 25000; } },
      { text: "Invest in fan engagement", effect: () => { adjustReputation(25); return -20000; } },
      { text: "Keep the prices unchanged", effect: () => { adjustReputation(-25); return -30000; } }
    ]
  },
  {
    question: "Your artist is nominated for an international award.",
    options: [
      { text: "Increase promotion (Cost E30k)", effect: () => { adjustReputation(30); return 40000; } },
      { text: "Invest in further training", effect: () => { adjustArtistPopularity(20); return -20000; } },
      { text: "Wait for the outcome", effect: () => { adjustReputation(-15); return -15000; } }
    ]
  },
  {
    question: "A famous social media influencer offers to collaborate on a campaign.",
    options: [
      { text: "Collaborate immediately (Cost E35k)", effect: () => { adjustReputation(40); return 50000; } },
      { text: "Negotiate terms", effect: () => { adjustReputation(20); return 25000; } },
      { text: "Decline the collaboration", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "A security issue disrupts a live event.",
    options: [
      { text: "Enhance security measures", effect: () => { adjustReputation(25); return -25000; } },
      { text: "Issue a public apology", effect: () => { adjustReputation(15); return -15000; } },
      { text: "Work with authorities", effect: () => { adjustReputation(10); return -10000; } }
    ]
  },
  {
    question: "A new competitor enters the market with innovative ideas.",
    options: [
      { text: "Innovate your own offerings (Cost E40k)", effect: () => { adjustReputation(30); return -40000; } },
      { text: "Focus on your strengths", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Acquire smaller talents", effect: () => { adjustReputation(15); return -20000; } }
    ]
  },
  // 52 New Scenarios
  {
    question: "Your artist’s music video wins a prestigious award.",
    options: [
      { text: "Host a celebration event (Cost E40k)", effect: () => { adjustReputation(40); adjustArtistPopularity(30); return 60000; } },
      { text: "Promote the win online", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Ignore the achievement", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "A competitor spreads false rumors about your label.",
    options: [
      { text: "Launch a PR campaign to counter", effect: () => { adjustReputation(25); return -30000; } },
      { text: "Sue for defamation", effect: () => { adjustReputation(15); return -40000; } },
      { text: "Do nothing", effect: () => { adjustReputation(-30); return -25000; } }
    ]
  },
  {
    question: "Your artist is offered a role in a blockbuster movie soundtrack.",
    options: [
      { text: "Accept the offer (Cost E60k)", effect: () => { adjustArtistPopularity(60); adjustReputation(40); return 80000; } },
      { text: "Negotiate for royalties", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Decline to focus on music", effect: () => { adjustReputation(-20); return -20000; } }
    ]
  },
  {
    question: "A fan starts a petition for your artist to tour their city.",
    options: [
      { text: "Add the city to the tour (Cost E30k)", effect: () => { adjustArtistHappiness(20); adjustReputation(30); return 45000; } },
      { text: "Send merchandise instead", effect: () => { adjustReputation(15); return -15000; } },
      { text: "Ignore the petition", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "Your artist’s old demo leaks and gains traction online.",
    options: [
      { text: "Release it officially", effect: () => { adjustArtistPopularity(40); return 50000; } },
      { text: "Suppress the leak", effect: () => { adjustReputation(-20); return -30000; } },
      { text: "Let it spread naturally", effect: () => { adjustArtistPopularity(20); return 20000; } }
    ]
  },
  {
    question: "A tech company offers to create an AI version of your artist.",
    options: [
      { text: "Partner with them (Cost E50k)", effect: () => { adjustReputation(35); return 60000; } },
      { text: "Test a pilot version", effect: () => { adjustReputation(20); return -25000; } },
      { text: "Reject the idea", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "Your artist’s live stream crashes due to high demand.",
    options: [
      { text: "Upgrade servers immediately", effect: () => { adjustReputation(25); return -30000; } },
      { text: "Apologize and reschedule", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Blame the platform", effect: () => { adjustReputation(-30); return -25000; } }
    ]
  },
  {
    question: "A popular game wants to feature your artist’s song.",
    options: [
      { text: "License the song (Cost E20k)", effect: () => { adjustArtistPopularity(50); return 70000; } },
      { text: "Negotiate a higher fee", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Decline the offer", effect: () => { adjustReputation(-15); return -10000; } }
    ]
  },
  {
    question: "Your artist’s rival challenges them to a public showdown.",
    options: [
      { text: "Accept the challenge (Cost E40k)", effect: () => { adjustArtistPopularity(50); return 60000; } },
      { text: "Counter with your own event", effect: () => { adjustReputation(20); return -30000; } },
      { text: "Ignore the provocation", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "A sudden tax audit targets your label.",
    options: [
      { text: "Hire top accountants", effect: () => { adjustReputation(20); return -40000; } },
      { text: "Settle quickly", effect: () => { adjustReputation(-15); return -30000; } },
      { text: "Fight the audit", effect: () => { adjustReputation(-25); return -50000; } }
    ]
  },
  {
    question: "Your artist’s fanbase launches a surprise crowdfunding campaign.",
    options: [
      { text: "Match their funds (Cost E30k)", effect: () => { adjustReputation(40); return 50000; } },
      { text: "Thank them and invest", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Decline the funds", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "A hurricane cancels your artist’s major concert.",
    options: [
      { text: "Donate proceeds to relief", effect: () => { adjustReputation(35); return -25000; } },
      { text: "Reschedule with bonuses", effect: () => { adjustReputation(20); return -30000; } },
      { text: "Cancel without refund", effect: () => { adjustReputation(-40); return -35000; } }
    ]
  },
  {
    question: "Your artist is invited to a high-profile fashion show.",
    options: [
      { text: "Perform at the show (Cost E35k)", effect: () => { adjustReputation(40); return 55000; } },
      { text: "Attend as a guest", effect: () => { adjustReputation(20); return 20000; } },
      { text: "Skip the event", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "A viral dance trend uses your artist’s song without credit.",
    options: [
      { text: "Claim credit publicly", effect: () => { adjustArtistPopularity(40); return 50000; } },
      { text: "Sue the creators", effect: () => { adjustReputation(-20); return -30000; } },
      { text: "Join the trend", effect: () => { adjustArtistPopularity(25); return 30000; } }
    ]
  },
  {
    question: "Your artist’s mentor offers exclusive coaching.",
    options: [
      { text: "Accept the offer (Cost E25k)", effect: () => { adjustArtistHappiness(30); adjustArtistPopularity(20); return -25000; } },
      { text: "Negotiate a group session", effect: () => { adjustArtistHappiness(15); return -15000; } },
      { text: "Decline politely", effect: () => { adjustReputation(-15); return -10000; } }
    ]
  },
  {
    question: "A documentary crew wants to feature your artist’s journey.",
    options: [
      { text: "Grant full access (Cost E30k)", effect: () => { adjustReputation(35); adjustArtistPopularity(40); return 60000; } },
      { text: "Limit their scope", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Refuse the project", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "Your artist’s song is banned in a major market.",
    options: [
      { text: "Fight the ban legally", effect: () => { adjustReputation(20); return -40000; } },
      { text: "Adapt the song", effect: () => { adjustReputation(15); return -25000; } },
      { text: "Accept the ban", effect: () => { adjustReputation(-30); return -30000; } }
    ]
  },
  {
    question: "A billionaire fan offers to fund your next project.",
    options: [
      { text: "Accept the funding", effect: () => { adjustReputation(40); return 80000; } },
      { text: "Negotiate terms", effect: () => { adjustReputation(25); return 50000; } },
      { text: "Decline politely", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "Your artist’s equipment is stolen before a gig.",
    options: [
      { text: "Replace it urgently", effect: () => { adjustReputation(20); return -35000; } },
      { text: "Improvise with rentals", effect: () => { adjustReputation(10); return -20000; } },
      { text: "Cancel the show", effect: () => { adjustReputation(-30); return -25000; } }
    ]
  },
  {
    question: "A rival label copies your marketing strategy.",
    options: [
      { text: "Innovate a new approach", effect: () => { adjustReputation(30); return -30000; } },
      { text: "Confront them legally", effect: () => { adjustReputation(15); return -40000; } },
      { text: "Do nothing", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "Your artist’s song tops the charts unexpectedly.",
    options: [
      { text: "Launch a tour (Cost E50k)", effect: () => { adjustArtistPopularity(60); adjustReputation(40); return 80000; } },
      { text: "Release bonus content", effect: () => { adjustArtistPopularity(30); return 40000; } },
      { text: "Maintain momentum", effect: () => { adjustReputation(15); return 20000; } }
    ]
  },
  {
    question: "A political group wants to use your song in their campaign.",
    options: [
      { text: "Allow it for a fee", effect: () => { adjustReputation(-20); return 50000; } },
      { text: "Deny permission", effect: () => { adjustReputation(25); return -15000; } },
      { text: "Negotiate neutrality", effect: () => { adjustReputation(15); return 30000; } }
    ]
  },
  {
    question: "Your artist’s health declines due to tour stress.",
    options: [
      { text: "Pause the tour for recovery", effect: () => { adjustArtistHappiness(30); adjustReputation(20); return -30000; } },
      { text: "Hire a substitute", effect: () => { adjustReputation(-15); return -20000; } },
      { text: "Push through", effect: () => { adjustArtistHappiness(-40); adjustReputation(-30); return -35000; } }
    ]
  },
  {
    question: "A new genre surges in popularity.",
    options: [
      { text: "Adapt your artist’s style (Cost E35k)", effect: () => { adjustArtistPopularity(50); return 60000; } },
      { text: "Experiment cautiously", effect: () => { adjustArtistPopularity(25); return -20000; } },
      { text: "Stick to your roots", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "Your artist’s fans start a boycott over a misinterpreted lyric.",
    options: [
      { text: "Clarify the meaning", effect: () => { adjustReputation(20); return -20000; } },
      { text: "Apologize and edit", effect: () => { adjustReputation(15); return -25000; } },
      { text: "Dismiss the backlash", effect: () => { adjustReputation(-35); return -30000; } }
    ]
  },
  {
    question: "A music school offers your artist an honorary degree.",
    options: [
      { text: "Accept and attend (Cost E20k)", effect: () => { adjustReputation(30); return 40000; } },
      { text: "Accept quietly", effect: () => { adjustReputation(15); return 20000; } },
      { text: "Decline the honor", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "Your artist’s collaborator demands a bigger cut of profits.",
    options: [
      { text: "Agree to their terms", effect: () => { adjustArtistHappiness(20); return -30000; } },
      { text: "Renegotiate fairly", effect: () => { adjustReputation(15); return -20000; } },
      { text: "End the collaboration", effect: () => { adjustReputation(-25); return -25000; } }
    ]
  },
  {
    question: "A surprise duet opportunity arises with a global star.",
    options: [
      { text: "Seize the chance (Cost E60k)", effect: () => { adjustArtistPopularity(70); adjustReputation(50); return 90000; } },
      { text: "Propose a future project", effect: () => { adjustReputation(25); return 30000; } },
      { text: "Pass on it", effect: () => { adjustReputation(-20); return -20000; } }
    ]
  },
  {
    question: "Your label’s website gets hacked.",
    options: [
      { text: "Hire cybersecurity experts", effect: () => { adjustReputation(20); return -35000; } },
      { text: "Fix it internally", effect: () => { adjustReputation(10); return -20000; } },
      { text: "Ignore the breach", effect: () => { adjustReputation(-40); return -30000; } }
    ]
  },
  {
    question: "A viral meme boosts your artist’s song unexpectedly.",
    options: [
      { text: "Ride the wave with promotion (Cost E25k)", effect: () => { adjustArtistPopularity(50); return 60000; } },
      { text: "Create a meme-inspired video", effect: () => { adjustReputation(20); return -20000; } },
      { text: "Let it die out", effect: () => { adjustReputation(-15); return -10000; } }
    ]
  },
  {
    question: "Your artist’s tour bus breaks down mid-tour.",
    options: [
      { text: "Replace it immediately", effect: () => { adjustReputation(20); return -40000; } },
      { text: "Repair and delay shows", effect: () => { adjustReputation(-15); return -25000; } },
      { text: "Cancel remaining dates", effect: () => { adjustReputation(-35); return -30000; } }
    ]
  },
  {
    question: "A competitor offers to merge labels with you.",
    options: [
      { text: "Merge for growth", effect: () => { adjustReputation(40); return 70000; } },
      { text: "Negotiate a partnership", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Reject the merger", effect: () => { adjustReputation(-20); return -20000; } }
    ]
  },
  {
    question: "Your artist’s unreleased track is leaked by a staff member.",
    options: [
      { text: "Release it early", effect: () => { adjustArtistPopularity(40); return 50000; } },
      { text: "Fire the staff and sue", effect: () => { adjustReputation(-20); return -30000; } },
      { text: "Investigate quietly", effect: () => { adjustReputation(15); return -20000; } }
    ]
  },
  {
    question: "A reality TV show wants your artist as a judge.",
    options: [
      { text: "Accept the role (Cost E40k)", effect: () => { adjustArtistPopularity(60); adjustReputation(40); return 80000; } },
      { text: "Negotiate appearance fees", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Decline the spotlight", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "Your artist’s fans crash a venue due to overselling.",
    options: [
      { text: "Compensate and upgrade security", effect: () => { adjustReputation(25); return -35000; } },
      { text: "Apologize publicly", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Blame the venue", effect: () => { adjustReputation(-30); return -30000; } }
    ]
  },
  {
    question: "A new streaming platform offers exclusive rights to your catalog.",
    options: [
      { text: "Sign the exclusivity deal", effect: () => { adjustReputation(35); return 70000; } },
      { text: "Keep it multi-platform", effect: () => { adjustReputation(20); return 30000; } },
      { text: "Reject the deal", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "Your artist’s performance goes viral for the wrong reasons.",
    options: [
      { text: "Spin it into a positive", effect: () => { adjustReputation(20); return 40000; } },
      { text: "Issue an apology", effect: () => { adjustReputation(10); return -20000; } },
      { text: "Ignore the backlash", effect: () => { adjustReputation(-35); return -30000; } }
    ]
  },
  {
    question: "A fan-made cover of your song outshines the original.",
    options: [
      { text: "Collaborate with the fan", effect: () => { adjustArtistPopularity(40); return 50000; } },
      { text: "Promote the original harder", effect: () => { adjustReputation(15); return -25000; } },
      { text: "Demand it be taken down", effect: () => { adjustReputation(-30); return -20000; } }
    ]
  },
  {
    question: "Your artist is offered a residency in a major city.",
    options: [
      { text: "Accept the residency (Cost E50k)", effect: () => { adjustArtistPopularity(60); adjustReputation(40); return 80000; } },
      { text: "Negotiate shorter terms", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Decline the offer", effect: () => { adjustReputation(-20); return -15000; } }
    ]
  },
  {
    question: "A sudden boycott targets your label over a staff tweet.",
    options: [
      { text: "Address and fire the staff", effect: () => { adjustReputation(20); return -25000; } },
      { text: "Apologize and retrain", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Dismiss the boycott", effect: () => { adjustReputation(-35); return -30000; } }
    ]
  },
  {
    question: "Your artist’s charity single raises unexpected funds.",
    options: [
      { text: "Donate all proceeds", effect: () => { adjustReputation(40); return -20000; } },
      { text: "Split with promotion", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Keep the funds", effect: () => { adjustReputation(-30); return 60000; } }
    ]
  },
  {
    question: "A rival poaches your top producer.",
    options: [
      { text: "Hire a better replacement", effect: () => { adjustReputation(25); return -40000; } },
      { text: "Sue for breach of contract", effect: () => { adjustReputation(15); return -30000; } },
      { text: "Let it go", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "Your artist’s album is delayed due to perfectionism.",
    options: [
      { text: "Push for release", effect: () => { adjustArtistHappiness(-20); adjustReputation(20); return 50000; } },
      { text: "Give them more time", effect: () => { adjustArtistHappiness(30); return -25000; } },
      { text: "Cancel the project", effect: () => { adjustReputation(-30); return -35000; } }
    ]
  },
  {
    question: "A major festival cancels due to funding issues.",
    options: [
      { text: "Host a replacement event", effect: () => { adjustReputation(30); return -40000; } },
      { text: "Offer refunds", effect: () => { adjustReputation(15); return -25000; } },
      { text: "Blame organizers", effect: () => { adjustReputation(-25); return -20000; } }
    ]
  },
  {
    question: "Your artist’s fan club organizes a flash mob.",
    options: [
      { text: "Join and promote it (Cost E20k)", effect: () => { adjustArtistPopularity(40); adjustReputation(30); return 50000; } },
      { text: "Send merchandise", effect: () => { adjustReputation(20); return -15000; } },
      { text: "Ignore the effort", effect: () => { adjustReputation(-20); return -10000; } }
    ]
  },
  {
    question: "A leaked contract reveals high artist pay.",
    options: [
      { text: "Justify the investment", effect: () => { adjustReputation(20); return -20000; } },
      { text: "Renegotiate publicly", effect: () => { adjustReputation(15); return 30000; } },
      { text: "Deny the leak", effect: () => { adjustReputation(-30); return -25000; } }
    ]
  },
  {
    question: "Your artist’s music inspires a hit TV show theme.",
    options: [
      { text: "License it officially", effect: () => { adjustArtistPopularity(50); return 70000; } },
      { text: "Negotiate royalties", effect: () => { adjustReputation(25); return 40000; } },
      { text: "Demand they stop", effect: () => { adjustReputation(-20); return -20000; } }
    ]
  },

      {
        question: "A famous social media influencer offers to collaborate on a campaign.",
        options: [
          { text: "Collaborate immediately", effect: () => { adjustReputation(20); return -25000; } },
          { text: "Negotiate terms", effect: () => { adjustReputation(10); return -15000; } },
          { text: "Decline the collaboration", effect: () => { adjustReputation(-10); return 0; } }
        ]
      },
      {
        question: "A security issue disrupts a live event.",
        options: [
          { text: "Enhance security measures", effect: () => { adjustReputation(10); return -15000; } },
          { text: "Issue a public apology", effect: () => { adjustReputation(5); return -10000; } },
          { text: "Work with authorities", effect: () => { adjustReputation(5); return -5000; } }
        ]
      },
      {
        question: "A new competitor enters the market with innovative ideas.",
        options: [
          { text: "Innovate your own offerings", effect: () => { adjustReputation(15); return -25000; } },
          { text: "Focus on your strengths", effect: () => { adjustReputation(10); return 0; } },
          { text: "Acquire smaller talents", effect: () => { adjustReputation(5); return -15000; } }
        ]
      },
      {
        question: "Your artist's song is sampled without permission.",
        options: [
          { text: "Take legal action", effect: () => { adjustReputation(10); return -20000; } },
          { text: "Negotiate a settlement", effect: () => { adjustReputation(5); return -15000; } },
          { text: "Ignore the issue", effect: () => { adjustReputation(-10); return 0; } }
        ]
      },
      {
        question: "A positive review from a major publication boosts your profile.",
        options: [
          { text: "Amplify the publicity", effect: () => { adjustReputation(15); return -10000; } },
          { text: "Reinvest in promotion", effect: () => { adjustReputation(10); return -15000; } },
          { text: "Take a measured approach", effect: () => { return 0; } }
        ]
      },
      {
    question: "A positive review from a major publication boosts your profile.",
    options: [
      { text: "Amplify the publicity", effect: () => { adjustReputation(15); return -10000; } },
      { text: "Reinvest in promotion", effect: () => { adjustReputation(10); return -15000; } },
      { text: "Take a measured approach", effect: () => { return 0; } }
    ]
  },
  {
    question: "A backstage incident creates a stir before a major performance.",
    options: [
      { text: "Address it publicly", effect: () => { adjustReputation(5); return -10000; } },
      { text: "Downplay the incident", effect: () => { adjustReputation(-5); return 0; } },
      { text: "Offer compensation to affected fans", effect: () => { adjustReputation(10); return -15000; } }
    ]
  },
  {
    question: "A viral trend emerges that perfectly fits your brand.",
    options: [
      { text: "Capitalize on the trend", effect: () => { adjustReputation(10); return -12000; } },
      { text: "Observe and adapt later", effect: () => { adjustReputation(5); return 0; } },
      { text: "Ignore the trend", effect: () => { adjustReputation(-5); return 0; } }
    ]
  },
  {
    question: "A competitor releases a diss track aimed at you.",
    options: [
      { text: "Fire back with a response", effect: () => { adjustReputation(8); return -8000; } },
      { text: "Take the high road", effect: () => { adjustReputation(5); return 0; } },
      { text: "Ignore and focus on your music", effect: () => { adjustReputation(3); return 0; } }
    ]
  },
  {
    question: "A major sponsor offers a deal that clashes with your image.",
    options: [
      { text: "Accept for financial gain", effect: () => { adjustReputation(-10); return 50000; } },
      { text: "Negotiate for better alignment", effect: () => { adjustReputation(5); return 20000; } },
      { text: "Reject to protect your brand", effect: () => { adjustReputation(10); return 0; } }
    ]
  },
  {
    question: "Your latest album leaks before its official release.",
    options: [
      { text: "Drop the album early", effect: () => { adjustReputation(5); return -5000; } },
      { text: "Take legal action", effect: () => { adjustReputation(-5); return -15000; } },
      { text: "Use the hype to your advantage", effect: () => { adjustReputation(10); return -10000; } }
    ]
  },
  {
    question: "A charity organization asks you to perform for free.",
    options: [
      { text: "Perform and promote it", effect: () => { adjustReputation(15); return -20000; } },
      { text: "Donate instead", effect: () => { adjustReputation(10); return -10000; } },
      { text: "Politely decline", effect: () => { adjustReputation(-5); return 0; } }
    ]
  },
  {
    question: "A high-profile artist offers to collaborate on a track.",
    options: [
      { text: "Accept eagerly", effect: () => { adjustReputation(20); return -25000; } },
      { text: "Negotiate terms", effect: () => { adjustReputation(15); return -15000; } },
      { text: "Decline to maintain artistic control", effect: () => { adjustReputation(-5); return 0; } }
    ]
  },
  {
    question: "Your social media manager posts something controversial.",
    options: [
      { text: "Apologize and take responsibility", effect: () => { adjustReputation(5); return -10000; } },
      { text: "Blame the manager and fire them", effect: () => { adjustReputation(-10); return 0; } },
      { text: "Ignore and move on", effect: () => { adjustReputation(-5); return 0; } }
    ]
  }
      

    ];

    const rivalLabels = ["Eswatini Top Dogs", "Piggs Peak Soundwave Label", "Manzini Music Co.", "Lubombo Recording Studio", "Hlane Harmony House"];
   const marketNews = [
  "Industry News: Streaming platforms see a surge, increasing artist demand by 10%!",
  "Market Update: Vinyl sales spike, boosting traditional music popularity!",
  "Economic News: Inflation rises, increasing equipment and training costs by 15%!",
  "Trend Alert: Afropop dominates charts, enhancing genre-specific artist value!",
  "Media Buzz: A new music festival launches, offering high-profile show opportunities!",
  "Tech Update: New sound engineering software revolutionizes production efficiency!",
  "Global Spotlight: International artists show increased interest in Swazi Jive Records!",
  "Chart-Topping Update: Local artist breaks streaming records with debut single!",
  "Investment News: Major sponsor signs on, boosting label’s financial prospects!",
  "Market Insight: Digital downloads surge as fans embrace online concerts!",
  "Economic Forecast: Currency fluctuations impact artist touring budgets!",
  "Industry Trend: Indie labels join forces, sparking a wave of collaboration!",
  "Production Breakthrough: Innovative recording techniques lower studio costs!",
  "Fan Frenzy: Social media buzz fuels an unexpected rise in merchandise sales!",
  "Brand Partnership: A top consumer brand collaborates with Swazi Jive Records!",
  "Event Update: Pop-up live sessions captivate audiences, driving ticket sales!",
  "Streaming Stats: Record-breaking listens set new benchmarks on digital platforms!",
  "Talent Radar: Emerging artists garner nationwide acclaim from critics!",
  "Collaboration Alert: Iconic producer teams up with local talent for a breakthrough album!",
  "Revenue Report: Strong album sales contribute to robust quarterly growth!"
];

    // ... existing code ...
const artistMoods = [
  { name: "Excited", demandModifier: 0.9, successModifier: 1.2, happinessPenalty: 5 },
  { name: "Neutral", demandModifier: 1.0, successModifier: 1.0, happinessPenalty: 10 },
  { name: "Desperate", demandModifier: 0.8, successModifier: 1.5, happinessPenalty: 15 },
  { name: "Demanding", demandModifier: 1.2, successModifier: 0.8, happinessPenalty: 20 }
];

// Add this after your existing artistMoods array
const artistDemands = [
  {
    type: "salary",
    text: "demands a higher daily payment of E",
    amount: (artist) => Math.round(artist.contractCost * 0.3),
    effect: {
      accept: {
        reputation: 10,
        artistHappiness: 15,
        staffMorale: -5,
        message: "accepts the increased payment"
      },
      reject: {
        reputation: -15,
        artistHappiness: -20,
        staffMorale: 5,
        message: "is upset about the rejection"
      }
    }
  },
  {
    type: "equipment",
    text: "requests new studio equipment worth E",
    amount: (artist) => 25000 + Math.round(artist.popularity * 100),
    effect: {
      accept: {
        reputation: 15,
        artistHappiness: 20,
        staffMorale: 10,
        message: "is thrilled with the new equipment"
      },
      reject: {
        reputation: -10,
        artistHappiness: -15,
        staffMorale: -5,
        message: "threatens to leave over poor equipment"
      }
    }
  },
  {
    type: "promotion",
    text: "wants a marketing campaign worth E",
    amount: (artist) => 20000 + Math.round(artist.popularity * 150),
    effect: {
      accept: {
        reputation: 20,
        artistHappiness: 15,
        staffMorale: 5,
        message: "gains more visibility"
      },
      reject: {
        reputation: -15,
        artistHappiness: -20,
        staffMorale: 0,
        message: "feels unsupported"
      }
    }
  }
];

    // Game state initialization
    function initializeGameState() {
      gameState = {
        cash: 163200,
        day: 0,
        reputation: 0,
        availableScenarios: [...allScenarios],
        currentScenario: null,
        artists: [],
        staff: [
        { role: "Manager", morale: 45, salary: 4300, costReduction: 0.03, moodBoost: 8, reputationMultiplier: 1.05, skillLevel: 6 },
    { role: "Marketing Manager", morale: 55, salary: 5100, costReduction: 0.04, moodBoost: 11, reputationMultiplier: 1.09, skillLevel: 7 },
    { role: "Production Assistant", morale: 40, salary: 3800, costReduction: 0.01, moodBoost: 6, reputationMultiplier: 1.02, skillLevel: 4 },
    ],
        activeDeals: [],
        equipment: [],
    newsUpdates: ["Breaking News: Swazi Jive Records Appoints New President, Industry Expects Fresh Direction!"] // Add initial news
  };
  updateReputationDisplay();
}

    function adjustReputation(amount) {
      gameState.reputation = Math.max(0, Math.min(100, gameState.reputation + amount));
      updateReputationDisplay();
    }
   // Function that triggers when a staff card is clicked; shows context-sensitive advice
   function showStaffHint(role, morale) {
      let roleLower = role.toLowerCase();
      let advice = "";
     
     if (roleLower.includes("executive producer")) {
    advice = "As an Executive Producer, leverage your strategic vision and extensive experience to drive high-quality productions and mentor your team.";
  } else if (roleLower.includes("senior producer")) {
    advice = "Senior Producers should balance innovation with efficiency—aim for cutting-edge production while guiding junior staff.";
  } else if (roleLower.includes("producer")) {
    advice = morale > 70 
      ? "Now is the perfect time to experiment with innovative sounds and production techniques."
      : "We might need to stick with proven formulas until the team's confidence improves.";
  } else if (roleLower.includes("marketing manager")) {
    advice = "Marketing Managers should focus on creative campaigns and data-driven strategies to enhance brand visibility and fan engagement.";
  } else if (roleLower.includes("financial manager")) {
    advice = "Financial Managers are key to label stability—ensure budgets are tight and every expense is justified.";
  } else if (roleLower.includes("creative director")) {
    advice = "Creative Directors should push the envelope with bold ideas while staying true to the label’s vision.";
  } else if (roleLower.includes("artist liaison")) {
    advice = "Artist Liaisons excel in communication; focus on building strong, lasting relationships with your talent.";
  } else if (roleLower.includes("studio manager")) {
    advice = "Studio Managers ensure smooth operations—prioritize efficiency, maintenance, and a well-run facility.";
  } else if (roleLower.includes("event coordinator")) {
    advice = "Event Coordinators should design memorable experiences that captivate fans and drive ticket sales.";
  } else if (roleLower.includes("digital strategist")) {
    advice = "Digital Strategists need to stay ahead of trends; use social media insights and online analytics to boost the label’s digital presence.";
  } else if (roleLower.includes("production assistant")) {
    advice = "Production Assistants support the team—attention to detail and stellar organization skills are essential.";
  } else if (roleLower.includes("manager")) {
    advice = morale > 70 
      ? "A good manager focuses on high-ROI opportunities while maintaining excellent relationships with artists."
      : "Be cautious with spending and work on rebuilding your reputation.";
  } else if (roleLower.includes("publicist")) {
    advice = morale > 70
      ? "With a strong public image, you can lead bold PR moves!"
      : "Focus on damage control and restoring the label’s public image.";
  } else if (roleLower.includes("talent") || roleLower.includes("a&r") || roleLower.includes("scout")) {
    advice = morale > 70
      ? "Your talent scouting is on point—go after breakthrough artists to keep the roster fresh."
      : "Focus on nurturing your current talent before expanding the roster.";
  } else {
    advice = "Keep up the great work and adapt as challenges arise.";
  }
  
  if (morale < 30) {
    advice += " (Note: Low staff morale may affect advice quality)";
  }
  
  document.getElementById('staff-hint').textContent = advice;
    }
  
    function getCurrentReputationLevel() {
      let level = 1;
      for (const [key, value] of Object.entries({
        1: { min: 0 },
        2: { min: 1000000 },
        3: { min: 5000000 },
        4: { min: 15000000 },
        5: { min: 30000000 }
      })) {
        if (gameState.cash >= value.min) level = parseInt(key);
      }
      return level;
    }

    // Add these functions to handle job market
function generateJobCandidates() {
  const candidates = [
    { role: "A&R Specialist", morale: 50, salary: 4800, hiring_cost: 14800, moodBoost: 12, reputationMultiplier: 1.08, skillLevel: 7 },
    { role: "Senior Producer", morale: 55, salary: 5200, hiring_cost: 15200, moodBoost: 10, reputationMultiplier: 1.1, skillLevel: 8 },
    { role: "Manager", morale: 45, salary: 4300, hiring_cost: 14300, moodBoost: 8, reputationMultiplier: 1.05, skillLevel: 6 },
    { role: "Marketing Manager", morale: 55, salary: 5100, hiring_cost: 15100, moodBoost: 11, reputationMultiplier: 1.09, skillLevel: 7 },
    { role: "Production Assistant", morale: 40, salary: 3800, hiring_cost: 13800, moodBoost: 6, reputationMultiplier: 1.02, skillLevel: 4 },
    { role: "Executive Producer", morale: 65, salary: 6000, hiring_cost: 16000, moodBoost: 15, reputationMultiplier: 1.15, skillLevel: 9 },
    { role: "Digital Strategist", morale: 50, salary: 4700, hiring_cost: 14700, moodBoost: 10, reputationMultiplier: 1.08, skillLevel: 7 },
    { role: "Event Coordinator", morale: 45, salary: 4200, hiring_cost: 14200, moodBoost: 9, reputationMultiplier: 1.06, skillLevel: 6 },
    { role: "Creative Director", morale: 60, salary: 5500, hiring_cost: 15500, moodBoost: 12, reputationMultiplier: 1.12, skillLevel: 8 },
    { role: "Financial Manager", morale: 50, salary: 5300, hiring_cost: 15300, moodBoost: 8, reputationMultiplier: 1.07, skillLevel: 7 },
    { role: "Artist Liaison", morale: 55, salary: 4900, hiring_cost: 14900, moodBoost: 11, reputationMultiplier: 1.1, skillLevel: 7 },
    { role: "Studio Manager", morale: 50, salary: 5200, hiring_cost: 15200, moodBoost: 10, reputationMultiplier: 1.08, skillLevel: 7 },
    { role: "Talent Scout", morale: 50, salary: 4500, hiring_cost: 14500, moodBoost: 9, reputationMultiplier: 1.06, skillLevel: 6 }
  ];

  const jobMarket = document.getElementById('job-applications-market');
  jobMarket.innerHTML = candidates.map(candidate => `
    <div class="market-item" onclick="hireCandidateFromMarket(${JSON.stringify(candidate).replace(/"/g, '&quot;')})">
      <strong>${candidate.role}</strong><br>
      💰 Salary: E${candidate.salary}/day<br>
      ⭐ Skill Level: ${candidate.skillLevel}<br>
      📋 Morale: ${candidate.morale}<br>
      💼 Hiring Cost: E${candidate.hiring_cost}
    </div>
  `).join('');
}

function hireCandidateFromMarket(candidate) {
  if (gameState.cash < candidate.hiring_cost) {
    alert("Not enough cash to hire this candidate!");
    return;
  }

  const newStaffMember = {
    role: candidate.role,
    morale: 75,
    salary: candidate.salary,
    costReduction: 0.03,
    moodBoost: 8,
    reputationMultiplier: 1.05,
    skillLevel: 6
  };

  gameState.cash -= candidate.hiring_cost;
  gameState.staff.push(newStaffMember);
  
   // Apply one-time reputation boost when hiring
 const reputationBoost = Math.round((candidate.reputationMultiplier - 1) * 100);
  adjustReputation(reputationBoost);
  
  addMessage(`Hired ${candidate.role} for E${candidate.hiring_cost}`);
  addMessage(`📈 Label reputation increased by ${reputationBoost} points from new hire!`);
  updateGameDisplay();
}


    function updateReputationDisplay() {
      const level = getCurrentReputationLevel();
      const levelElement = document.getElementById('reputation-level');
      levelElement.textContent = ["Basic", "Rising", "Notable", "Celebrated", "Legendary"][level - 1];
      document.getElementById('reputation-points').textContent = Math.floor(gameState.cash / 500000 * 100);
      levelElement.classList.remove(
        'reputation-level-basic',
        'reputation-level-rising',
        'reputation-level-notable',
        'reputation-level-celebrated',
        'reputation-level-legendary'
      );
      levelElement.classList.add(`reputation-level-${["basic","rising","notable","celebrated","legendary"][level - 1]}`);
      unlockContent();
    }

    function addMessage(message) {
      const container = document.getElementById('log-container');
      container.innerHTML += `<div>${message}</div>`;
      container.scrollTop = container.scrollHeight;
    }

    function updateGameDisplay() {
      document.getElementById('cash').textContent = `E${gameState.cash.toLocaleString()}`;
      document.getElementById('day').textContent = gameState.day;
      document.getElementById('artist-roster').innerHTML = gameState.artists.map(artist => `
    <div class="artist-card">
      <strong>${artist.name}</strong> (${artist.genre})<br>
      📈 Popularity: ${artist.popularity}<br>
      😊 Happiness: ${artist.happiness}%<br>
      📅 Contract: ${artist.contractDays} days
      <div class="artist-buttons">
        <button onclick="generateArtistDemand('${artist.name}')" class="demand-btn">📢 Check Demands</button>
        <br>

        <button onclick='startNegotiation(${JSON.stringify(artist)}, false)' class="renegotiate-btn">📝 Renegotiate</button>
      </div>
      ${artist.currentDemand ? 
        `<div class="current-demand">
          📢 ${artist.name} ${artist.currentDemand.text}${artist.currentDemand.amount}
          <button onclick="handleDemand('${artist.name}', true)">✅ Accept</button>
          <button onclick="handleDemand('${artist.name}', false)">❌ Reject</button>
        </div>` : ''
      }
    </div>
  `).join('');
  document.getElementById('staff-list').innerHTML = gameState.staff.map(staff => `
  <div class="staff-card">
    <strong>${staff.role}</strong><br>
    😊 Morale: ${staff.morale}%<br>
    💰 Salary: E${staff.salary}<br>
    📈 Skill: ${staff.skillLevel}<br>
    ⭐ Boost: ${staff.moodBoost}<br>
    <button onclick="confirmTerminateStaff('${staff.role}')">Terminate Contract</button>
    <br>
  
    <button onclick="showStaffAdvice('${staff.role}')">Staff Advice</button>
  </div>
`).join('');
      document.getElementById('inventory-list').innerHTML = [
        ...gameState.equipment.map(item => `
          <div class="market-item">
            <strong>🎛️ ${item.name}</strong><br>
            ⭐ Quality: +${item.quality}<br>
            🔧 Maintenance: E${item.maintenance}/day
          </div>
        `),
        ...gameState.activeDeals.map(deal => `
          <div class="market-item">
            <strong>📝 ${deal.name}</strong><br>
            💰 Revenue: E${deal.revenue}/day<br>
            ⏱️ Days Left: ${deal.daysLeft}
          </div>
        `)
      ].join('');
      updateNewsDisplay();
    }

    // Add these new functions
function generateArtistDemand(artistName) {
  const artist = gameState.artists.find(a => a.name === artistName);
  if (!artist || artist.daysSigned < 5) return;

  const demand = artistDemands[Math.floor(Math.random() * artistDemands.length)];
  artist.currentDemand = {
    ...demand,
    amount: demand.amount(artist)
  };
  addMessage(`📢 ${artist.name} ${demand.text}${demand.amount.toLocaleString()}`);
  updateGameDisplay();
}

function handleDemand(artistName, accepted) {
  const artist = gameState.artists.find(a => a.name === artistName);
  if (!artist || !artist.currentDemand) return;

  const effect = accepted ? artist.currentDemand.effect.accept : artist.currentDemand.effect.reject;
  
  if (accepted) {
    if (gameState.cash < artist.currentDemand.amount) {
      addMessage(`❌ Not enough cash to meet ${artist.name}'s demand!`);
      return;
    }
    gameState.cash -= artist.currentDemand.amount;
  }

  adjustReputation(effect.reputation);
  adjustArtistHappiness(effect.artistHappiness);
  adjustStaffMorale(effect.staffMorale);
  
  addMessage(`${artist.name} ${effect.message}`);
  delete artist.currentDemand;
  updateGameDisplay();
}

// Function to terminate a staff member.
function terminateStaff(staff, remainingDays) {
  // Calculate termination cost based on remaining contract days.
  let terminationCost = staff.salary * remainingDays;
  gameState.cash = Math.max(0, gameState.cash - terminationCost);
  
  // Apply reputation penalty: 10% if high skill, otherwise 5%.
  let repPenaltyPercent = (staff.skillLevel >= 8) ? 10 : 5;
  let repPenalty = gameState.reputation * (repPenaltyPercent / 100);
  gameState.reputation = Math.max(0, gameState.reputation - repPenalty);
  
  // Remove the staff member from the game state.
  gameState.staff = gameState.staff.filter(s => s !== staff);
  
  addMessage(`Terminated ${staff.role}. Deducted E${terminationCost.toLocaleString()} and reputation decreased by ${repPenaltyPercent}%.`);
  updateGameDisplay();
}



    function confirmTerminateStaff(role) {
  let staff = gameState.staff.find(s => s.role === role);
  if (staff) {
    let remainingDays = 25; // Default to 25 days
    let terminationCost = staff.salary * remainingDays;
    let reputationLoss = (staff.skillLevel >= 8) ? '10%' : '5%';

    if (confirm(`Terminating ${staff.role} will cost E${terminationCost.toLocaleString()} and reduce reputation by ${reputationLoss}. Proceed?`)) {
      terminateStaff(staff, remainingDays);
    }
  }
}



    function adjustArtistHappiness(amount) {
      gameState.artists.forEach(artist => {
        artist.happiness = Math.max(0, Math.min(100, artist.happiness + amount));
      });
    }

    function adjustStaffMorale(amount) {
  gameState.staff.forEach(staff => {
    staff.morale = Math.max(0, Math.min(100, staff.morale + amount));
  });
  updateGameDisplay();
}

    function adjustArtistPopularity(amount) {
      gameState.artists.forEach(artist => {
        artist.popularity = Math.max(0, artist.popularity + amount);
      });
    }

  // 1. Function to check score and trigger submission
function checkHighScore() {
  // Get current game stats from your simulation
  const playerCash = getCurrentCash(); // You'll need to implement this to get the current cash value
  
  // Check if player meets the minimum threshold
  if (playerCash >=50000000) {
    // Show high score submission dialog
    showHighScoreDialog(playerCash);
  }
}

// 2. Function to show high score submission dialog
function showHighScoreDialog(cash) {
  // Create modal dialog
  const modal = document.createElement('div');
  modal.className = 'high-score-modal';
  modal.style.position = 'fixed';
  modal.style.top = '50%';
  modal.style.left = '50%';
  modal.style.transform = 'translate(-50%, -50%)';
  modal.style.backgroundColor = 'rgba(45, 45, 45, 0.95)';
  modal.style.padding = '20px';
  modal.style.borderRadius = '8px';
  modal.style.zIndex = '1000';
  modal.style.boxShadow = '0 0 20px rgba(0, 0, 0, 0.5)';
  modal.style.width = '400px';
  modal.style.maxWidth = '90%';
  modal.style.border = '2px solid #9c27b0';
  
  // Get other game stats
  const reputation = getReputation(); // Implement this function
  const dailyRevenue = getDailyRevenue(); // Implement this function
  const dailyCosts = getDailyCosts(); // Implement this function
  
  // Calculate profit margin
  const profitMargin = ((dailyRevenue - dailyCosts) / dailyRevenue * 100).toFixed(1);
  
  // Set modal content
  modal.innerHTML = `
    <h2 style="color: #ffeb3b; margin-top: 0; text-align: center;">HIGH SCORE ACHIEVED!</h2>
    <p style="color: white; text-align: center;">Congratulations! You've reached £${(cash/50000000).toFixed(1)}M</p>
    <div style="margin: 15px 0; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 5px;">
      <h3 style="color: #ffeb3b; margin-top: 0;">Your Final Stats:</h3>
      <ul style="color: white; list-style-type: none; padding-left: 0;">
        <li><span style="display: inline-block; width: 140px;">Cash:</span> £${cash.toLocaleString()}</li>
        <li><span style="display: inline-block; width: 140px;">Reputation:</span> ${reputation}</li>
        <li><span style="display: inline-block; width: 140px;">Daily Revenue:</span> £${dailyRevenue.toLocaleString()}</li>
        <li><span style="display: inline-block; width: 140px;">Daily Costs:</span> £${dailyCosts.toLocaleString()}</li>
        <li><span style="display: inline-block; width: 140px;">Profit Margin:</span> ${profitMargin}%</li>
      </ul>
    </div>
    <div style="margin-top: 20px;">
      <label style="color: white; display: block; margin-bottom: 8px; font-weight: bold;">Enter Your Name:</label>
      <input type="text" id="player-name-input" style="padding: 10px; width: 100%; background-color: #333; color: white; border: 1px solid #666; border-radius: 4px;" maxlength="20" placeholder="Your Mogul Name">
    </div>
    <div style="margin-top: 20px; display: flex; justify-content: space-between;">
      <button id="submit-score-btn" style="padding: 10px 20px; background-color: #9c27b0; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">Submit Score</button>
      <button id="cancel-score-btn" style="padding: 10px 20px; background-color: #555; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
    </div>
  `;
  
  // Add modal to the DOM
  document.body.appendChild(modal);
  
  // Focus on the input field
  document.getElementById('player-name-input').focus();
  
  // Handle submit button click
  document.getElementById('submit-score-btn').addEventListener('click', function() {
    const playerName = document.getElementById('player-name-input').value.trim();
    if (!playerName) {
      alert('Please enter your name');
      return;
    }
    
    // Submit the score
    submitHighScore(playerName, cash, reputation, dailyRevenue, dailyCosts, profitMargin);
    
    // Remove the modal
    document.body.removeChild(modal);
  });
  
  // Handle cancel button click
  document.getElementById('cancel-score-btn').addEventListener('click', function() {
    document.body.removeChild(modal);
  });
}

// 3. Function to submit high score to leaderboard
function submitHighScore(playerName, cash, reputation, dailyRevenue, dailyCosts, profitMargin) {
  // Create the score data object
  const scoreData = {
    playerName: playerName,
    finalCash: cash,
    reputation: reputation,
    dailyRevenue: dailyRevenue,
    dailyCosts: dailyCosts,
    profitMargin: parseFloat(profitMargin),
    submissionDate: new Date().toISOString()
  };
  
  // First, check if this score would make the top 50
  fetchCurrentScores().then(existingScores => {
    // Add the new score
    existingScores.push(scoreData);
    
    // Sort by cash in descending order
    existingScores.sort((a, b) => b.finalCash - a.finalCash);
    
    // Check if the new score is in the top 50
    const scoreIndex = existingScores.findIndex(score => 
      score.playerName === playerName && score.finalCash === cash
    );
    
    if (scoreIndex < 50) {
      // Score is in the top 50, save it to the leaderboard
      saveScore(scoreData).then(() => {
        // Show confirmation and offer to view leaderboard
        if (confirm('Your high score has been recorded! View the leaderboard?')) {
          window.location.href = 'leaderboard.html';
        }
      }).catch(error => {
        console.error('Error saving score:', error);
        alert('There was an error saving your score. Please try again.');
      });
    } else {
      // Not a top 50 score
      alert('Great game, but your score didn\'t make the top 50 on the leaderboard.');
    }
  }).catch(error => {
    console.error('Error checking leaderboard:', error);
    alert('There was an error checking the leaderboard. Please try again.');
  });
}

// 4. Function to fetch current scores from the leaderboard
async function fetchCurrentScores() {
  try {
    // This assumes you have an API endpoint to get scores
    const response = await fetch('/api/getScores');
    if (!response.ok) {
      throw new Error('Failed to fetch scores');
    }
    return await response.json();
  } catch (error) {
    console.error('Error fetching scores:', error);
    // Return empty array if there's an error
    return [];
  }
}

// 5. Function to save score to the leaderboard
async function saveScore(scoreData) {
  try {
    const response = await fetch('/api/submitScore', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(scoreData)
    });
    
    if (!response.ok) {
      throw new Error('Failed to save score');
    }
    
    return await response.json();
  } catch (error) {
    console.error('Error saving score:', error);
    throw error;
  }
}

// Helper functions to get game data - implement these based on your game's structure
function getCurrentCash() {
  // Example implementation - replace with your actual game data access
  // This might be available in a global game state object or DOM element
  const cashElement = document.querySelector('.cash-display') || document.getElementById('cash');
  if (cashElement) {
    // Extract the numeric value from the text (removing currency symbols, commas, etc.)
    const cashText = cashElement.textContent || cashElement.innerText;
    return parseInt(cashText.replace(/[^0-9]/g, ''));
  }
  return 0; // Default if not found
}

function getReputation() {
  // Example implementation - replace with your actual game data access
  const reputationElement = document.querySelector('.reputation-display') || document.getElementById('reputation');
  if (reputationElement) {
    const repText = reputationElement.textContent || reputationElement.innerText;
    return parseInt(repText.replace(/[^0-9]/g, ''));
  }
  return 0;
}

function getDailyRevenue() {
  // Example implementation - replace with your actual game data access
  const revenueElement = document.querySelector('.revenue-display') || document.getElementById('revenue');
  if (revenueElement) {
    const revenueText = revenueElement.textContent || revenueElement.innerText;
    return parseInt(revenueText.replace(/[^0-9]/g, ''));
  }
  return 0;
}

function getDailyCosts() {
  // Example implementation - replace with your actual game data access
  const costsElement = document.querySelector('.costs-display') || document.getElementById('costs');
  if (costsElement) {
    const costsText = costsElement.textContent || costsElement.innerText;
    return parseInt(costsText.replace(/[^0-9]/g, ''));
  }
  return 0;
}

// 6. Function to check game state periodically
function setupHighScoreChecker() {
  // Check for high score every 10 seconds
  setInterval(checkHighScore, 10000);
  
  // Also add a check at game end if your game has a defined "game over" condition
  // Example: document.getElementById('end-game-button').addEventListener('click', checkHighScore);
}

// 7. Initialize when the game loads
window.addEventListener('load', function() {
  setupHighScoreChecker();

  

    const baseMarketData = {
      shows: [
        { name: "Local Club Show", baseCost: 5000, popularity: 5, duration: 1 },
        { name: "Radio Station Performance", baseCost: 15000, popularity: 15, duration: 2 },
        { name: "Music Festival Slot", baseCost: 50000, popularity: 30, duration: 3 },
        { name: "National TV Show", baseCost: 75000, popularity: 40, duration: 4 },
        { name: "International Tour", baseCost: 100000, popularity: 50, duration: 5 },
        { name: "Charity Concert", baseCost: 20000, popularity: 20, duration: 2 },
        { name: "Private Event", baseCost: 30000, popularity: 25, duration: 3 }
      ],
      deals: [
        { name: "Merchandise Deal", baseCost: 20000, revenue: 5000, duration: 5 },
        { name: "Brand Sponsorship", baseCost: 50000, revenue: 15000, duration: 7 },
        { name: "Distribution Deal", baseCost: 100000, revenue: 25000, duration: 10 },
        { name: "Streaming Partnership", baseCost: 80000, revenue: 20000, duration: 8 },
        { name: "Endorsement Contract", baseCost: 60000, revenue: 18000, duration: 6 }
      ],
      artists: [
  { name: "Rising Star", genre: "Afropop", baseCost: 30000, popularity: 35, contractCost: 5000 },
  { name: "Underground Talent", genre: "Hip-hop", baseCost: 25000, popularity: 30, contractCost: 4000 },
  { name: "Traditional Artist", genre: "Sibhaca", baseCost: 40000, popularity: 45, contractCost: 6000 },
  { name: "Pop Sensation", genre: "Pop", baseCost: 85000, popularity: 90, contractCost: 7000 },
  { name: "Jazz Virtuoso", genre: "Jazz", baseCost: 35000, popularity: 40, contractCost: 5500 },
  { name: "Lihlombe 12", genre: "sibhaca", baseCost: 35000, popularity: 25, contractCost: 6000 },
  { name: "Mbabane Beats", genre: "hiphop", baseCost: 35000, popularity: 40, contractCost: 6000 },
  { name: "Folk Maestro", genre: "Folk", baseCost: 30000, popularity: 35, contractCost: 4900 }
],
equipment: [
  { name: "Studio Microphone", baseCost: 8000, quality: 10, maintenance: 500 },
  { name: "Mixing Console", baseCost: 25000, quality: 20, maintenance: 1000 },
  { name: "Recording Suite", baseCost: 60000, quality: 35, maintenance: 2000 },
  { name: "Live Sound System", baseCost: 40000, quality: 25, maintenance: 1500 },
  { name: "Lighting Rig", baseCost: 15000, quality: 15, maintenance: 700 },
  { name: "Projector Screen", baseCost: 7000, quality: 10, maintenance: 400 },
  { name: "Digital Audio Workstation", baseCost: 45000, quality: 30, maintenance: 1200 }
],
training: [
  { name: "Vocal Workshop", baseCost: 12000, skillBoost: 15, duration: 3 },
  { name: "Dance Training", baseCost: 18000, skillBoost: 20, duration: 5 },
  { name: "Production Course", baseCost: 30000, skillBoost: 25, duration: 7 },
  { name: "Songwriting Masterclass", baseCost: 25000, skillBoost: 22, duration: 6 },
  { name: "Stage Presence Seminar", baseCost: 20000, skillBoost: 18, duration: 4 },
  { name: "Creative Collaboration Retreat", baseCost: 35000, skillBoost: 28, duration: 7 }
],
marketing: [
  { name: "Social Media Campaign", baseCost: 5000, exposure: 20, duration: 5 },
  { name: "Radio Advertisement", baseCost: 25000, exposure: 30, duration: 7 },
  { name: "TV Commercial", baseCost: 50000, exposure: 50, duration: 10 },
  { name: "Billboard Promotion", baseCost: 35000, exposure: 40, duration: 8 },
  { name: "Influencer Collaboration", baseCost: 15000, exposure: 25, duration: 6 },
  { name: "TV Commercial", baseCost: 90000, exposure: 50, duration: 10 },
  { name: "International Billboard Campaign", baseCost: 120000, exposure: 80, duration: 15 },
  { name: "Press Release Distribution", baseCost: 18000, exposure: 22, duration: 5 },
  { name: "Music Video Promotion", baseCost: 30000, exposure: 35, duration: 7 },
  { name: "Concert Sponsorship", baseCost: 130000, exposure: 60, duration: 12 },
  { name: "Streaming Platform Ads", baseCost: 128000, exposure: 33, duration: 6 },
  { name: "Merchandising Campaign", baseCost: 45000, exposure: 45, duration: 9 },
  { name: "Event Partnerships", baseCost: 155000, exposure: 55, duration: 11 },
  { name: "Street Team Marketing", baseCost: 12000, exposure: 18, duration: 4 },
  { name: "Music Festival Sponsorship", baseCost: 190000, exposure: 75, duration: 14 },
  { name: "Podcast Advertising", baseCost: 22000, exposure: 28, duration: 6 },
  { name: "Magazine Feature", baseCost: 26000, exposure: 30, duration: 7 }
]
    };

   // New shuffled and expanded unlockable content
const unlockableContent = {
  2: {
    newArtists: [
      { name: "Electric Echo", genre: "Electronic", baseCost: 160000, popularity: 155, contractCost: 16500 },
      { name: "Rock Legend", genre: "Rock", baseCost: 170000, popularity: 180, contractCost: 17500 },
      { name: "Folk Fusion", genre: "Folk", baseCost: 135000, popularity: 145, contractCost: 15000 } // new
    ],
    newDeals: [
      { name: "Emvasi Streaming Deal", baseCost: 1000000, revenue: 400000, duration: 12 }
    ],
    newEquipment: [
      { name: "Guitar Amp", baseCost: 12000, quality: 18, maintenance: 600 },
      { name: "Advanced Sound System", baseCost: 800000, quality: 40, maintenance: 25000 }
    ],
    newTraining: [
      { name: "Production Course", baseCost: 30000, skillBoost: 25, duration: 7 },
      { name: "Advanced Vocal Techniques", baseCost: 14000, skillBoost: 17, duration: 3 },
      { name: "Social Media Mastery", baseCost: 35000, skillBoost: 22, duration: 5 } // new
    ]
  },
  3: {
    newArtists: [
      { name: "Soul Serenade", genre: "Soul", baseCost: 132000, popularity: 138, contractCost: 115200 },
      { name: "Emerging Star", genre: "Pop", baseCost: 250000, popularity: 240, contractCost: 270000 },
      { name: "Urban Pulse", genre: "Hip-Hop", baseCost: 155000, popularity: 165, contractCost: 117200 } // new
    ],
    newDeals: [
      { name: "Global Sponsorship", baseCost: 1500000, revenue: 500000, duration: 10 },
      { name: "Brand Partnership", baseCost: 1100000, revenue: 420000, duration: 8 } // new
    ],
    newEquipment: [
      { name: "LED Backdrop", baseCost: 30000, quality: 20, maintenance: 800 },
      { name: "Studio Pro Mic", baseCost: 200000, quality: 30, maintenance: 10000 },
      { name: "Drum Kit", baseCost: 18000, quality: 22, maintenance: 800 }
    ],
    newTraining: [
      { name: "Elite Performance Coaching", baseCost: 600000, skillBoost: 35, duration: 10 },
      { name: "Instrument Mastery Program", baseCost: 22000, skillBoost: 19, duration: 4 },
      { name: "Advanced Production Course", baseCost: 50000, skillBoost: 30, duration: 10 },
      { name: "Music Theory Intensive", baseCost: 16000, skillBoost: 20, duration: 5 }
    ]
  },
  4: {
    newArtists: [
      { name: "Indie Icon", genre: "Indie", baseCost: 645000, popularity: 660, contractCost: 666200 },
      { name: "Country Roads", genre: "Country", baseCost: 828000, popularity: 732, contractCost: 884500 },
      { name: "R&B Royalty", genre: "R&B", baseCost: 950000, popularity: 870, contractCost: 996800 },
      { name: "Alternative Visionary", genre: "Alternative", baseCost: 1037000, popularity: 942, contractCost: 1005300 }
    ],
    newDeals: [
      { name: "Merch Collaboration", baseCost: 800000, revenue: 300000, duration: 8 },
      { name: "Live Concert Tour Sponsorship", baseCost: 2000000, revenue: 600000, duration: 6 }
    ],
    newEquipment: [
      { name: "High-Fidelity Monitor", baseCost: 45000, quality: 25, maintenance: 1200 },
      { name: "Keyboard Synthesizer", baseCost: 22000, quality: 28, maintenance: 900 },
      { name: "Bass Amplifier", baseCost: 10000, quality: 16, maintenance: 550 },
      { name: "Acoustic Panels", baseCost: 5000, quality: 12, maintenance: 300 }
    ],
    newTraining: [
      { name: "Beat Making Bootcamp", baseCost: 28000, skillBoost: 23, duration: 6 },
      { name: "Improvisation Lab", baseCost: 13000, skillBoost: 16, duration: 3 },
      { name: "Song Arrangement Workshop", baseCost: 21000, skillBoost: 19, duration: 4 },
      { name: "Digital Music Production", baseCost: 40000, skillBoost: 30, duration: 9 }
    ]
  },
  5: {
    newArtists: [
      { name: "Rhythm Rebellion", genre: "Reggae", baseCost: 1140000, popularity: 1050, contractCost: 115800 },
      { name: "Latin Flame", genre: "Latin", baseCost: 2242000, popularity: 1148, contractCost: 2225600 },
      { name: "The Dreamers", genre: "Indie Rock", baseCost: 3365000, popularity: 2290, contractCost: 3350000 }
    ],
    newDeals: [
      { name: "Virtual Concert Deal", baseCost: 1300000, revenue: 450000, duration: 7 }
    ],
    newEquipment: [
      { name: "Virtual Reality Studio", baseCost: 950000, quality: 42, maintenance: 22000 },
      { name: "DJ Turntable", baseCost: 15000, quality: 20, maintenance: 700 },
      { name: "Sound Mixer", baseCost: 20000, quality: 23, maintenance: 850 },
      { name: "Wireless Microphone", baseCost: 9000, quality: 14, maintenance: 450 }
    ],
    newTraining: [
      { name: "Sound Engineering Seminar", baseCost: 32000, skillBoost: 27, duration: 8 },
      { name: "Live Performance Coaching", baseCost: 26000, skillBoost: 21, duration: 5 },
      { name: "Vocal Technique Workshop", baseCost: 400000, skillBoost: 25, duration: 8 },
      { name: "Songwriting Retreat", baseCost: 45000, skillBoost: 28, duration: 7 }, // new
      { name: "Songwriting Masterclass", baseCost: 500000, skillBoost: 30, duration: 12 }
    ]
  },
  6: {
    newArtists: [
      { name: "Harmony Heights", genre: "Pop", baseCost: 3395000, popularity: 1365, contractCost: 3375000 },
      { name: "Rock Legends", genre: "Rock", baseCost: 4170000, popularity: 1465, contractCost: 4110000 },
      { name: "Soulful Serenades", genre: "R&B", baseCost: 5320000, popularity: 2800, contractCost: 5150000 }
    ],
    newDeals: [
      { name: "Global Marketing Campaign", baseCost: 1800000, revenue: 550000, duration: 9 }
    ],
    newEquipment: [
      { name: "Portable Stage Lights", baseCost: 500000, quality: 35, maintenance: 15000 },
      { name: "Artist Couture Collection", baseCost: 400000, quality: 45, maintenance: 20000 },
      { name: "Premium Mixing Desk", baseCost: 1200000, quality: 50, maintenance: 30000 }
    ],
    newTraining: [
      { name: "Marketing Strategies", baseCost: 55000, skillBoost: 32, duration: 8 }, // new
      { name: "Performance Enhancement Training", baseCost: 700000, skillBoost: 40, duration: 10 },
      { name: "Instrumental Diversity Course", baseCost: 800000, skillBoost: 45, duration: 15 },
      { name: "Stage Presence Workshop", baseCost: 30000, skillBoost: 20, duration: 4 } // new
    ]
  }
};

// Function to unlock content based on reputation level
function unlockContent() {
  const level = getCurrentReputationLevel();
  if (unlockableContent[level]) {
    if (unlockableContent[level].newArtists) {
      baseMarketData.artists.push(...unlockableContent[level].newArtists);
    }
    if (unlockableContent[level].newDeals) {
      baseMarketData.deals.push(...unlockableContent[level].newDeals);
    }
    if (unlockableContent[level].newEquipment) {
      baseMarketData.equipment.push(...unlockableContent[level].newEquipment);
    }
    if (unlockableContent[level].newTraining) {
      baseMarketData.training.push(...unlockableContent[level].newTraining);
    }
    addMessage(`🎉 New content to shop unlocked at reputation level ${level}!`);
  }
}


    function fluctuateValue(baseValue, popularity = 0, isVolatile = false) {
      const demandFactor = 1 + (popularity / 100);
      const volatilityFactor = isVolatile ? 0.5 : 0.2;
      const randomFactor = 1 + (Math.random() - 0.5) * volatilityFactor;
      const timeFactor = 1 + (gameState.day / 1000);
      return Math.round(baseValue * demandFactor * randomFactor * timeFactor);
    }

    function createMarketData() {
      return {
        shows: baseMarketData.shows.map(show => ({
          ...show,
          cost: fluctuateValue(show.baseCost, show.popularity)
        })),
        deals: baseMarketData.deals.map(deal => ({
          ...deal,
          cost: fluctuateValue(deal.baseCost)
        })),
        artists: baseMarketData.artists.map(artist => ({
          ...artist,
          cost: fluctuateValue(artist.baseCost, artist.popularity, true)
        })),
        equipment: baseMarketData.equipment.map(item => ({
          ...item,
          cost: fluctuateValue(item.baseCost)
        })),
        training: baseMarketData.training.map(course => ({
          ...course,
          cost: fluctuateValue(course.baseCost, 0, true)
        })),
        marketing: baseMarketData.marketing.map(campaign => ({
          ...campaign,
          cost: fluctuateValue(campaign.baseCost, 0, true)
        }))
      };
    }

    function updateMarketplaces() {
  updateShowsMarket();
  updateDealsMarket();
  updateArtistsMarket();
  updateEquipmentMarket();
  updateTrainingMarket();
  updateMarketingMarket();
  generateJobCandidates(); // Add this line to include job market updates
}

    function updateShowsMarket() {
      document.getElementById('shows-market').innerHTML = marketData.shows.map(show => `
        <div class="market-item" onclick="bookShow('${show.name}', ${show.cost}, ${show.popularity}, ${show.duration})">
          <strong>${show.name}</strong><br>
          💰 Cost: E${show.cost.toLocaleString()}<br>
          📈 Popularity Boost: +${show.popularity}<br>
          ⏱️ Duration: ${show.duration} day${show.duration > 1 ? 's' : ''}
        </div>
      `).join('');
    }

    function updateDealsMarket() {
      document.getElementById('deals-market').innerHTML = marketData.deals.map(deal => `
        <div class="market-item" onclick="acceptDeal('${deal.name}', ${deal.cost}, ${deal.revenue}, ${deal.duration})">
          <strong>${deal.name}</strong><br>
          💰 Initial Cost: E${deal.cost.toLocaleString()}<br>
          💵 Daily Revenue: E${deal.revenue.toLocaleString()}<br>
          ⏱️ Duration: ${deal.duration} days
        </div>
      `).join('');
    }

    function updateArtistsMarket() {
      document.getElementById('artists-market').innerHTML = marketData.artists.map(artist => `
        <div class="market-item" onclick='startNegotiation(${JSON.stringify(artist)}, true)'>
          <strong>${artist.name}</strong><br>
          🎵 Genre: ${artist.genre}<br>
          💰 Cost: E${artist.cost.toLocaleString()}<br>
          📈 Popularity: ${artist.popularity}<br>
          📅 Contract: 30 days
        </div>
      `).join('');
    }

    function updateEquipmentMarket() {
      document.getElementById('equipment-market').innerHTML = marketData.equipment.map(item => `
        <div class="market-item" onclick="buyEquipment('${item.name}', ${item.cost}, ${item.quality}, ${item.maintenance})">
          <strong>${item.name}</strong><br>
          💰 Cost: E${item.cost.toLocaleString()}<br>
          ⭐ Quality: +${item.quality}<br>
          🔧 Maintenance: E${item.maintenance}/day
        </div>
      `).join('');
    }

    function updateTrainingMarket() {
      document.getElementById('training-market').innerHTML = marketData.training.map(course => `
        <div class="market-item" onclick="bookTraining('${course.name}', ${course.cost}, ${course.skillBoost}, ${course.duration})">
          <strong>${course.name}</strong><br>
          💰 Cost: E${course.cost.toLocaleString()}<br>
          📈 Skill Boost: +${course.skillBoost}<br>
          ⏱️ Duration: ${course.duration} days
        </div>
      `).join('');
    }

    function updateMarketingMarket() {
      document.getElementById('marketing-market').innerHTML = marketData.marketing.map(campaign => `
        <div class="market-item" onclick="launchCampaign('${campaign.name}', ${campaign.cost}, ${campaign.exposure}, ${campaign.duration})">
          <strong>${campaign.name}</strong><br>
          💰 Cost: E${campaign.cost.toLocaleString()}<br>
          🎯 Exposure: +${campaign.exposure}<br>
          ⏱️ Duration: ${campaign.duration} days
        </div>
      `).join('');
    }

    function showStaffAdvice(role, morale) {
      // Show container and initial message immediately
      const container = document.getElementById('staff-advice-container');
      document.getElementById('staff-member-name').textContent = role;
      document.getElementById('staff-advice-content').textContent = "Let me think about this situation...";
      container.style.display = 'flex';
      
      // Update with actual advice after a delay
      
  setTimeout(() => {
    let advice = "";
    if (role.toLowerCase().includes("manager")) {
      advice = morale > 70 
        ? "I suggest focusing on high-ROI opportunities and maintaining good relationships with our artists."
        : "We should be cautious with our spending and focus on rebuilding our reputation.";
    } else if (role.toLowerCase().includes("publicist")) {
      advice = morale > 70
        ? "Our public image is strong. Let's capitalize on this with some bold marketing moves!"
        : "We need to focus on damage control and rebuilding our public image.";
    } else if (role.toLowerCase().includes("producer")) {
      advice = morale > 70 
        ? "Now is the perfect time to experiment with innovative sounds and production techniques."
        : "We might need to stick with proven formulas until the team's confidence improves.";
    } else if (role.toLowerCase().includes("talent") || role.toLowerCase().includes("a&r")) {
      advice = morale > 70
        ? "Our scouting game is strong—let's go after breakthrough talent to keep our roster fresh."
        : "Focus on nurturing our current artists before expanding our talent pool.";
    } else {
      advice = "Keep up the great work and adapt as challenges arise.";
    }
    
    if (morale < 30) {
      advice += " (Note: Low staff morale may affect advice quality)";
    }
    
    document.getElementById('staff-advice-content').textContent = advice;
  }, 1000);
}
    function closeStaffAdvice() {
      document.getElementById('staff-advice-container').style.display = 'none';
    }

    function updateNewsDisplay() {
      const newsDiv = document.getElementById('news-updates');
      newsDiv.innerHTML = gameState.newsUpdates ? gameState.newsUpdates.map(update => `
        <div class="news-item">${update}</div>
      `).join('') : '';
    }

    function generateNews(cashEffect = 0, repChange = 0, isScenario = false, artist = null) {
      if (!gameState.newsUpdates) gameState.newsUpdates = [];
      let news = '';

      if (isScenario) {
        if (cashEffect > 0) {
          news = `Local News: Swazi Jive Records gains E${Math.abs(cashEffect).toLocaleString()} from a strategic decision, boosting reputation by ${repChange}!`;
        } else if (cashEffect < 0) {
          news = `Industry News: Swazi Jive Records spends E${Math.abs(cashEffect).toLocaleString()} on a decision, impacting reputation by ${repChange}!`;
        } else {
          news = `Entertainment News: Swazi Jive Records makes a neutral decision, with reputation unchanged at ${gameState.reputation}!`;
        }
      } else if (artist) {
        const popularityThreshold = artist.popularity > 50 ? "skyrockets" : "grows";
        const happinessThreshold = artist.happiness > 70 ? "thrilled" : artist.happiness < 30 ? "unhappy" : "content";
        const contractStatus = artist.contractDays <= 5 ? `with only ${artist.contractDays} days left on their contract!` : "under a solid contract.";
        news = `Entertainment News: ${artist.name}'s ${artist.genre} hit ${popularityThreshold} in popularity, leaving fans ${happinessThreshold} ${contractStatus}`;
      } else if (Math.random() < 0.2) { // 20% chance for random news
        const rival = rivalLabels[Math.floor(Math.random() * rivalLabels.length)];
        const marketUpdate = Math.random() < 0.5 ? marketNews[Math.floor(Math.random() * marketNews.length)] : 
          `${rival} News: ${rival} poaches a top artist, increasing competition in the market!`;
        news = marketUpdate;
      }

      if (news) {
        gameState.newsUpdates.unshift(news); // Add new news at the top
        if (gameState.newsUpdates.length > 10) gameState.newsUpdates.pop(); // Limit to 10 updates
        updateNewsDisplay();
      }
    }

    function checkBankruptcy() {
      if (gameState.cash < 0) {
        addMessage("💥 Game Over: You've gone bankrupt!");
        document.querySelectorAll('.market-item').forEach(item => item.onclick = null);
        document.querySelectorAll('.decision-btn').forEach(btn => btn.onclick = null);
        showRetryButton();
        return true;
      }
      return false;
    }

    function showRetryButton() {
      const log = document.getElementById('log-container');
      const retryButton = document.createElement('button');
      retryButton.textContent = "Retry";
      retryButton.className = "new-game-btn";
      retryButton.onclick = startNewGame;
      log.innerHTML += `<div>💥 Game Over: You've gone bankrupt!</div>`;
      log.appendChild(retryButton);
      log.scrollTop = log.scrollHeight;
    }

    function startNewGame() {
      initializeGameState();
      startNewDay();
      updateMarketplaces();
      const retryBtn = document.querySelector('.new-game-btn');
      if (retryBtn) { retryBtn.remove(); }
    }

    function buyEquipment(name, cost, quality, maintenance) {
      if (gameState.cash < cost) {
        addMessage(`❌ Not enough cash to buy ${name}`);
        return;
      }
      gameState.cash -= cost;
      if (checkBankruptcy()) return;
      gameState.equipment.push({ name, quality, maintenance });
      adjustArtistHappiness(quality / 2);
      adjustReputation(quality / 3);
      addMessage(`🎛️ Purchased ${name} for E${cost.toLocaleString()}`);
      updateGameDisplay();
    }

    function bookTraining(name, cost, skillBoost, duration) {
      if (gameState.cash < cost) {
        addMessage(`❌ Not enough cash for ${name}`);
        return;
      }
      gameState.cash -= cost;
      if (checkBankruptcy()) return;
      adjustArtistPopularity(skillBoost);
      adjustStaffMorale(skillBoost / 2);
      addMessage(`📚 Booked ${name} for E${cost.toLocaleString()}`);
      updateGameDisplay();
    }

    function launchCampaign(name, cost, exposure, duration) {
      if (gameState.cash < cost) {
        addMessage(`❌ Not enough cash for ${name}`);
        return;
      }
      gameState.cash -= cost;
      if (checkBankruptcy()) return;
      adjustArtistPopularity(exposure);
      adjustReputation(exposure / 2);
      addMessage(`📣 Launched ${name} for E${cost.toLocaleString()}`);
      updateGameDisplay();
    }

    function bookShow(name, cost, popularity, duration) {
      if (gameState.cash < cost) {
        addMessage(`❌ Not enough cash to book ${name}`);
        return;
      }
      gameState.cash -= cost;
      if (checkBankruptcy()) return;
      adjustArtistPopularity(popularity);
      adjustReputation(popularity / 2);
      addMessage(`🎭 Booked ${name} for E${cost.toLocaleString()}`);
      updateGameDisplay();
    }

    function acceptDeal(name, cost, revenue, duration) {
      if (gameState.cash < cost) {
        addMessage(`❌ Not enough cash for ${name}`);
        return;
      }
      gameState.cash -= cost;
      if (checkBankruptcy()) return;
      gameState.activeDeals.push({ name, revenue, daysLeft: duration });
      adjustReputation(10);
      addMessage(`📝 Accepted ${name} for E${cost.toLocaleString()}`);
      updateGameDisplay();
    }

    function startNegotiation(artist, isNewArtist) {
  currentNegotiationArtist = { ...artist, isNewArtist };
  const mood = artistMoods[Math.floor(Math.random() * artistMoods.length)];
  currentNegotiationArtist.mood = mood;
  currentOffer = isNewArtist ? Math.floor(artist.cost * mood.demandModifier) : Math.floor(artist.popularity * 1000 * mood.demandModifier);
  
  const container = document.getElementById('negotiation-container');
  document.getElementById('negotiation-artist-name').textContent = artist.name;
  document.getElementById('artist-mood').textContent = mood.name;
  document.getElementById('artist-demand').textContent = currentOffer.toLocaleString();
  document.getElementById('your-offer').textContent = currentOffer.toLocaleString();
  
  container.style.display = 'flex';
  addMessage(`🎭 ${artist.name} enters negotiations with a ${mood.name.toLowerCase()} mood.`);
}

function acceptDemand() {
  if (currentNegotiationArtist) {
    if (gameState.cash < currentOffer) {
      addMessage(`❌ Not enough cash to meet ${currentNegotiationArtist.name}'s demand`);
      return;
    }
    gameState.cash -= currentOffer;
    if (checkBankruptcy()) return;
    if (currentNegotiationArtist.isNewArtist) {
      const newArtist = {
        name: currentNegotiationArtist.name,
        genre: currentNegotiationArtist.genre,
        popularity: currentNegotiationArtist.popularity,
        happiness: 100,
        contractDays: 30,
        contractCost: currentOffer,
        daysSigned: 0,
        currentDemand: null,
        mood: currentNegotiationArtist.mood
      };
      gameState.artists.push(newArtist);
      addMessage(`🎤 Signed ${newArtist.name} for E${currentOffer.toLocaleString()}`);
      addEmotionalFeedback("pleased");
    } else {
      // Find the actual artist in the gameState and update their contract
      const artist = gameState.artists.find(a => a.name === currentNegotiationArtist.name);
      if (artist) {
        artist.contractDays = 30;  // Reset contract days
        artist.contractCost = currentOffer;
      }
      addMessage(`✨ Renewed contract with ${currentNegotiationArtist.name} for E${currentOffer.toLocaleString()}`);
      addEmotionalFeedback("pleased");
    }
    adjustReputation(15);
    closeNegotiation();
    updateGameDisplay();
  }
}

    function offerLess() {
      if (currentNegotiationArtist) {
        let happiness = currentNegotiationArtist.happiness || 50;
        let baseSuccessChance = (happiness + gameState.reputation) / 200;
        let moodModifier = currentNegotiationArtist.mood.successModifier;
        let successChance = baseSuccessChance * moodModifier;
        let proposedOffer = Math.floor(currentOffer * 0.8); // Offer 80% of the demand
        if (Math.random() < successChance) {
          currentOffer = proposedOffer;
          addMessage(`${currentNegotiationArtist.name} accepted your lower offer of E${currentOffer.toLocaleString()}`);
          document.getElementById('your-offer').textContent = currentOffer.toLocaleString();
          addEmotionalFeedback("reluctantly pleased");
          // Check for happiness penalty if Desperate and offer is too low
          if (currentNegotiationArtist.mood.name === "Desperate" && (currentOffer / currentNegotiationArtist.cost < 0.7 || currentOffer / (currentNegotiationArtist.popularity * 1000) < 0.7)) {
            adjustArtistHappiness(-currentNegotiationArtist.mood.happinessPenalty);
            addMessage(`😞 ${currentNegotiationArtist.name} feels unhappy with the low offer, losing ${currentNegotiationArtist.mood.happinessPenalty}% happiness.`);
          }
        } else {
          addMessage(`${currentNegotiationArtist.name} rejected your lower offer.`);
          declineOffer();
          addEmotionalFeedback("frustrated");
        }
      }
    }

    function offerMore() {
      if (currentNegotiationArtist) {
        let proposedOffer = Math.floor(currentOffer * 1.2); // Offer 120% of the demand
        currentOffer = proposedOffer;
        addMessage(`${currentNegotiationArtist.name} accepted your higher offer of E${currentOffer.toLocaleString()}`);
        document.getElementById('your-offer').textContent = currentOffer.toLocaleString();
        addEmotionalFeedback("delighted");
        adjustArtistHappiness(10); // Slight happiness boost for generous offer
      }
    }

    function bluff() {
      if (currentNegotiationArtist) {
        let happiness = currentNegotiationArtist.happiness || 50;
        let baseSuccessChance = 0.1; // Very low 10% chance
        let moodModifier = currentNegotiationArtist.mood.successModifier;
        let successChance = baseSuccessChance * moodModifier;
        let proposedOffer = Math.floor(currentOffer * 0.5); // Offer 50% of the demand
        if (Math.random() < successChance) {
          currentOffer = proposedOffer;
          addMessage(`${currentNegotiationArtist.name} was fooled by your bluff and accepted E${currentOffer.toLocaleString()}!`);
          document.getElementById('your-offer').textContent = currentOffer.toLocaleString();
          adjustArtistHappiness(10); // Small happiness boost for cleverness
          adjustReputation(10); // Reputation boost for bold move
          addEmotionalFeedback("surprised");
        } else {
          addMessage(`${currentNegotiationArtist.name} saw through your bluff and walked away angrily.`);
          declineOffer(true); // Apply penalty for failed bluff
          adjustArtistHappiness(-20); // Significant happiness drop
          adjustReputation(-15); // Large reputation penalty
          addEmotionalFeedback("furious");
        }
      }
    }

    function declineOffer(timedOut = false) {
      if (currentNegotiationArtist) {
        if (timedOut) {
          addMessage(`⏳ Negotiation with ${currentNegotiationArtist.name} timed out, resulting in a -5 reputation penalty.`);
          adjustReputation(-5);
        } else {
          addMessage(`Negotiation with ${currentNegotiationArtist.name} declined.`);
          if (!currentNegotiationArtist.isNewArtist) {
            adjustReputation(-5); // Small penalty for declining a renewal
          }
          addEmotionalFeedback("disappointed");
        }
        closeNegotiation();
      }
    }

    function closeNegotiation() {
      document.getElementById('negotiation-container').style.display = 'none';
      clearInterval(negotiationTimer);
      currentNegotiationArtist = null;
      currentOffer = 0;
    }

    function addEmotionalFeedback(emotion) {
      const emotions = {
        pleased: "The artist looks pleased.",
        "reluctantly pleased": "The artist seems reluctantly pleased.",
        delighted: "The artist looks delighted.",
        frustrated: "The artist seems frustrated.",
        surprised: "The artist looks surprised.",
        furious: "The artist is furious.",
        disappointed: "The artist looks disappointed."
      };
      addMessage(`🎭 ${emotions[emotion] || "The artist shows no clear emotion."}`);
    }

    function showActionSummary(cashEffect, repChange) {
      let rating;
      if (cashEffect > 0 && repChange > 0) {
        rating = "Excellent decision!";
      } else if (cashEffect > 0 || repChange > 0) {
        rating = "Good decision!";
      } else if (cashEffect < 0 && repChange < 0) {
        rating = "Poor decision!";
      } else {
        rating = "Mixed results.";
      }
      let summary = `Action Summary: ${rating} Cash ${cashEffect >= 0 ? "inflow" : "outflow"}: E${Math.abs(cashEffect).toLocaleString()}, Reputation change: ${repChange >= 0 ? "+" : ""}${repChange}.`;
      addMessage(summary);
    }

    function selectNewScenario() {
      if (gameState.availableScenarios.length === 0) {
        gameState.availableScenarios = [...allScenarios];
      }
      const randomIndex = Math.floor(Math.random() * gameState.availableScenarios.length);
      gameState.currentScenario = gameState.availableScenarios.splice(randomIndex, 1)[0];
    }

    function startNewDay() {
      if (gameState.day >= 50) {
        endGame();
        return;
      }

      gameState.day++;
      marketData = createMarketData();
      let dailyRevenue = 0;
      let maintenanceCost = 0;

      gameState.equipment.forEach(item => {
        maintenanceCost += item.maintenance;
      });

      gameState.activeDeals = gameState.activeDeals.filter(deal => {
        deal.daysLeft--;
        if (deal.daysLeft > 0) {
          dailyRevenue += deal.revenue;
          return true;
        }
        addMessage(`📝 Deal expired: ${deal.name} has been removed`);
        return false;
      });

      gameState.artists.forEach(artist => {
        const artistRevenue = Math.floor(artist.popularity * 1000 * (1 + gameState.reputation / 100));
        dailyRevenue += artistRevenue;
        
        addMessage(`💫 ${artist.name} generated E${artistRevenue.toLocaleString()} today`);
        artist.contractDays--;
        if (artist.contractDays < 0) {
          addMessage(`🎤 Contract expired: ${artist.name} has left the label`);
          adjustReputation(-5);
          generateNews(0, -5, false, artist); // News about artist leaving
        } else {
          const totalEquipmentQuality = gameState.equipment.reduce((sum, item) => sum + item.quality, 0);
          const happinessBoost = Math.floor(totalEquipmentQuality / 10);
          artist.happiness = Math.min(100, artist.happiness + happinessBoost);
          if (artist.daysSigned = 0) {
            artist.daysSigned++;
          } else if (Math.random() < 0.3) { // 30% chance daily for artist news
            generateNews(0, 0, false, artist); // Random artist news
          }
          
        }
      });

      // Calculate staff salaries
  const staffSalaries = gameState.staff.reduce((total, staff) => total + staff.salary, 0);
  gameState.cash -= staffSalaries;

  // Add staff salary info to daily summary
  addMessage(`💼 Staff Salaries Paid: E${staffSalaries.toLocaleString()}`);


      gameState.artists = gameState.artists.filter(artist => artist.contractDays >= 0);

      if (maintenanceCost > 0) {
        gameState.cash -= maintenanceCost;
        addMessage(`🔧 Daily equipment maintenance cost: E${maintenanceCost.toLocaleString()}`);
      }

      if (dailyRevenue > 0) {
        gameState.cash += dailyRevenue;
        addMessage(`💰 Total daily revenue: E${dailyRevenue.toLocaleString()}`);
        adjustReputation(Math.floor(dailyRevenue / 10000));
      }

      // Generate random rival/market news (20% chance)
      generateNews();

      selectNewScenario();
      showNextScenario();
      updateGameDisplay();
      updateMarketplaces();

      if (gameState.artists.length === 0) {
        addMessage("⚠️ Warning: You have no artists! Sign new talent quickly!");
      }
      checkBankruptcy();
    }

    function showNextScenario() {
      const scenario = gameState.currentScenario;
      if (!scenario) return;
      const html = `
        <div class="scenario-box">
          <h3>${scenario.question}</h3>
          ${scenario.options.map((opt, index) => `
            <button class="decision-btn" onclick="handleDecision(${index})">
              ${opt.text}
            </button>
          `).join('')}
        </div>
      `;
      document.getElementById('scenario-container').innerHTML = html;
    }

    function handleDecision(optionIndex) {
      const scenario = gameState.currentScenario;
      if (!scenario) return;
      let repBefore = gameState.reputation;
      const cashEffect = scenario.options[optionIndex].effect();
      let repAfter = gameState.reputation;
      let repChange = repAfter - repBefore;

      gameState.cash += cashEffect;
      if (checkBankruptcy()) return;

      addMessage(`Decision made: ${scenario.options[optionIndex].text}`);
      if (cashEffect > 0) {
        addMessage(`💰 Gained E${Math.abs(cashEffect).toLocaleString()}`);
      } else if (cashEffect < 0) {
        addMessage(`💸 Spent E${Math.abs(cashEffect).toLocaleString()}`);
      }

      showActionSummary(cashEffect, repChange);
      generateNews(cashEffect, repChange, true); // Generate news based on scenario outcome

      if (gameState.day >= 50) {
        endGame();
      } else {
        startNewDay();
      }
      updateGameDisplay();
    }

      // Function to show toast notification
      function showToast(message, isSuccess = true) {
        const toast = document.getElementById('notification-toast');
        const toastMessage = document.getElementById('toast-message');
        
        if (toast && toastMessage) {
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    }
    
    // Function to create bonus points animation
    function showBonusPoints(amount, x, y) {
        const bonus = document.createElement('div');
        bonus.className = 'bonus-points';
        bonus.textContent = `+${amount}`;
        bonus.style.left = `${x}px`;
        bonus.style.top = `${y}px`;
        
        document.body.appendChild(bonus);
        
        setTimeout(() => {
            document.body.removeChild(bonus);
        }, 2000);
    }

    function endGame() {
      addMessage("🏁 Game Over: You've reached the end of 50 days!");
      addMessage(`Final Cash: E${gameState.cash.toLocaleString()}`);
      addMessage(`Final Reputation: ${gameState.reputation}`);
      document.querySelectorAll('.market-item').forEach(item => item.onclick = null);
      document.querySelectorAll('.decision-btn').forEach(btn => btn.onclick = null);
      showRetryButton();
    }

    document.addEventListener('DOMContentLoaded', function() {
      initializeGameState();
      startNewDay();
      updateMarketplaces();
    });
// Apply visual enhancements to existing elements
document.addEventListener('DOMContentLoaded', function() {
        // Apply panel styling to main game container
        const gameContainers = document.querySelectorAll('.game, .panel');
        gameContainers.forEach(container => {
            if (!container.classList.contains('panel')) {
                container.classList.add('panel');
            }
        });
        
        // Apply styling to any score display
        const scoreElements = document.querySelectorAll('#score, .score');
        scoreElements.forEach(element => {
            // Keep existing updates, just add the animation when it changes
            const originalTextContent = Object.getOwnPropertyDescriptor(
                Object.getPrototypeOf(element), 'textContent'
            );
            
            if (originalTextContent) {
                Object.defineProperty(element, 'textContent', {
                    set: function(value) {
                        originalTextContent.set.call(this, value);
                        this.style.animation = 'none';
                        setTimeout(() => {
                            this.style.animation = 'scoreFlash 0.5s ease';
                        }, 10);
                    },
                    get: function() {
                        return originalTextContent.get.call(this);
                    }
                });
            }
        });
        
        // Add artist-info class to artist containers
        const artistElements = document.querySelectorAll('.artist, .artist-container');
        artistElements.forEach(element => {
            if (!element.classList.contains('artist-info')) {
                element.classList.add('artist-info');
            }
        });
        
        // Enhance timer display
        const timerElements = document.querySelectorAll('#timer, .timer');
        timerElements.forEach(element => {
            if (!element.id) element.id = 'timer';
        });
    });


  </script>
</body>
</html>
